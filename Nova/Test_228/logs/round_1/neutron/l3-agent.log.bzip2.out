2018-06-28 20:39:40.408 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:39:56.770 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:39:56.771 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.002s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:40:16.556 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:40:16.560 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.004s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:40:20.414 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:40:56.780 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:40:56.781 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:41:00.415 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:41:16.559 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:41:16.562 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.003s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:41:40.422 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:41:56.789 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:41:56.790 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:42:16.564 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:42:16.569 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.005s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:42:20.427 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:42:51.660 3227 DEBUG neutron.agent.l3.agent [req-b9e21085-82c4-4b31-a044-7f0ded92a589 ca1112801c444cb8bc28f82ee41eebed 922a6360856e46299cc3dacf1d33d91a - - -] Got routers updated notification :[u'82a105f3-7ab0-49d9-a897-e1208c7c59a6'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-06-28 20:42:51.664 3227 DEBUG neutron.agent.l3.agent [-] Starting router update for 82a105f3-7ab0-49d9-a897-e1208c7c59a6, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-06-28 20:42:54.882 3227 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.linux.pd.add_router-8774341502830'] for router, before_create _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 20:42:54.883 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.add_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:42:54.884 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.add_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:42:54.884 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', '-o', 'netns', 'list'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:54.902 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'add', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:54.915 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'sysctl', '-w', 'net.ipv4.conf.all.promote_secondaries=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:54.937 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', 'link', 'set', 'lo', 'up'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:54.952 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'sysctl', '-w', 'net.ipv4.ip_forward=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:54.967 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'sysctl', '-w', 'net.ipv4.conf.all.arp_ignore=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:54.984 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'sysctl', '-w', 'net.ipv4.conf.all.arp_announce=2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.000 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'sysctl', '-w', 'net.ipv6.conf.all.forwarding=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.018 3227 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1132
2018-06-28 20:42:55.027 3227 DEBUG neutron.agent.l3.router_info [-] adding internal network: prefix(qr-), port(a73b94f4-ba61-4f66-bc89-29fe8497c6b1) _internal_network_added /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:444
2018-06-28 20:42:55.028 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-o', 'link', 'show', 'qr-a73b94f4-ba'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.054 3227 DEBUG neutron.agent.linux.utils [-] Running command: ['ip', '-o', 'link', 'show', 'br-int'] create_process /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:92
2018-06-28 20:42:55.348 3227 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): DelPortCommand(if_exists=True, bridge=None, port=qr-a73b94f4-ba) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-06-28 20:42:55.350 3227 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Transaction caused no change do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:114
2018-06-28 20:42:55.351 3227 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): AddPortCommand(bridge=br-int, may_exist=False, port=qr-a73b94f4-ba) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-06-28 20:42:55.352 3227 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=1): DbSetCommand(table=Interface, col_values=(('type', 'internal'), ('external_ids', {'iface-id': u'a73b94f4-ba61-4f66-bc89-29fe8497c6b1', 'iface-status': 'active', 'attached-mac': u'fa:16:3e:8c:e6:70'})), record=qr-a73b94f4-ba) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-06-28 20:42:55.386 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'link', 'set', 'qr-a73b94f4-ba', 'address', 'fa:16:3e:8c:e6:70'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.396 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', '-o', 'netns', 'list'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.406 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'link', 'set', 'qr-a73b94f4-ba', 'netns', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.427 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', 'link', 'set', 'qr-a73b94f4-ba', 'mtu', '1450'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.442 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', 'link', 'set', 'qr-a73b94f4-ba', 'up'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.455 3227 DEBUG neutron.agent.linux.interface [-] init_router_port: device_name(qr-a73b94f4-ba), namespace(qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6) init_router_port /usr/lib/python2.7/site-packages/neutron/agent/linux/interface.py:180
2018-06-28 20:42:55.456 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-o', 'link', 'show', 'qr-a73b94f4-ba'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.470 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', 'addr', 'show', 'qr-a73b94f4-ba'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.485 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-4', 'addr', 'add', '11.102.1.1/24', 'scope', 'global', 'dev', 'qr-a73b94f4-ba', 'brd', '11.102.1.255'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.497 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-4', 'route', 'list', 'dev', 'qr-a73b94f4-ba', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.510 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-6', 'route', 'list', 'dev', 'qr-a73b94f4-ba', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.525 3227 DEBUG neutron.agent.l3.router_info [-] appending port {u'allowed_address_pairs': [], u'extra_dhcp_opts': [], u'updated_at': u'2018-06-28T18:42:50Z', u'device_owner': u'network:router_interface', u'revision_number': 4, u'port_security_enabled': False, u'binding:profile': {}, u'binding:vnic_type': u'normal', u'fixed_ips': [{u'subnet_id': u'54d3498b-2745-4cdd-bac5-325b4ff172eb', u'prefixlen': 24, u'ip_address': u'11.102.1.1'}], u'id': u'a73b94f4-ba61-4f66-bc89-29fe8497c6b1', u'security_groups': [], u'binding:vif_details': {}, u'address_scopes': {u'4': None, u'6': None}, u'binding:vif_type': u'unbound', u'mac_address': u'fa:16:3e:8c:e6:70', u'project_id': u'922a6360856e46299cc3dacf1d33d91a', u'status': u'DOWN', u'subnets': [{u'dns_nameservers': [u'8.8.4.4'], u'ipv6_ra_mode': None, u'gateway_ip': u'11.102.1.1', u'cidr': u'11.102.1.0/24', u'id': u'54d3498b-2745-4cdd-bac5-325b4ff172eb', u'subnetpool_id': None}], u'binding:host_id': u'localhost.localdomain', u'description': u'', u'tags': [], u'device_id': u'82a105f3-7ab0-49d9-a897-e1208c7c59a6', u'name': u'', u'admin_state_up': True, u'network_id': u'48e9581e-671e-43b1-aed0-aa9a246f2829', u'tenant_id': u'922a6360856e46299cc3dacf1d33d91a', u'created_at': u'2018-06-28T18:42:47Z', u'mtu': 1450, u'extra_subnets': []} to internal_ports cache _process_internal_ports /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:555
2018-06-28 20:42:55.527 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.528 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-U', '-I', 'qr-a73b94f4-ba', '-c', '1', '-w', '1.5', '11.102.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.543 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:42:55.544 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:42:55.545 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.555 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-A', '-I', 'qr-a73b94f4-ba', '-c', '1', '-w', '1.5', '11.102.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.562 3227 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 20:42:55.565 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.587 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.627 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.649 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip6tables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.665 3227 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 106 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 20:42:55.667 3227 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 20:42:55.668 3227 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 20:42:55.669 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.692 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.705 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.724 3227 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 10 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 20:42:55.727 3227 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 20:42:55.728 3227 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.metadata.driver.after_router_added--9223363262513812197'] for router, after_create _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 20:42:55.728 3227 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 20:42:55.729 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.754 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.776 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.794 3227 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 17 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 20:42:55.795 3227 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 20:42:55.797 3227 DEBUG neutron.agent.linux.utils [-] Unable to access /var/lib/neutron/external/pids/82a105f3-7ab0-49d9-a897-e1208c7c59a6.pid get_value_from_file /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:254
2018-06-28 20:42:55.798 3227 DEBUG neutron.agent.linux.utils [-] Unable to access /var/lib/neutron/external/pids/82a105f3-7ab0-49d9-a897-e1208c7c59a6.pid get_value_from_file /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:254
2018-06-28 20:42:55.800 3227 DEBUG neutron.agent.metadata.driver [-] haproxy_cfg = 
global
    log         /dev/log local0 debug
    log-tag     haproxy-metadata-proxy-82a105f3-7ab0-49d9-a897-e1208c7c59a6
    user        neutron
    group       neutron
    maxconn     1024
    pidfile     /var/lib/neutron/external/pids/82a105f3-7ab0-49d9-a897-e1208c7c59a6.pid
    daemon

defaults
    log global
    mode http
    option httplog
    option dontlognull
    option http-server-close
    option forwardfor
    retries                 3
    timeout http-request    30s
    timeout connect         30s
    timeout client          32s
    timeout server          32s
    timeout http-keep-alive 30s

listen listener
    bind 0.0.0.0:9697
    server metadata /var/lib/neutron/metadata_proxy
    http-request add-header X-Neutron-Router-ID 82a105f3-7ab0-49d9-a897-e1208c7c59a6
 create_config_file /usr/lib/python2.7/site-packages/neutron/agent/metadata/driver.py:135
2018-06-28 20:42:55.801 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'haproxy', '-f', '/var/lib/neutron/ns-metadata-proxy/82a105f3-7ab0-49d9-a897-e1208c7c59a6.conf'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:55.835 3227 DEBUG neutron.agent.l3.agent [-] Finished a router update for 82a105f3-7ab0-49d9-a897-e1208c7c59a6 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-06-28 20:42:56.790 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:42:56.790 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:42:57.610 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-U', '-I', 'qr-a73b94f4-ba', '-c', '1', '-w', '1.5', '11.102.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:57.634 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-A', '-I', 'qr-a73b94f4-ba', '-c', '1', '-w', '1.5', '11.102.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:59.654 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-U', '-I', 'qr-a73b94f4-ba', '-c', '1', '-w', '1.5', '11.102.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:42:59.681 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-A', '-I', 'qr-a73b94f4-ba', '-c', '1', '-w', '1.5', '11.102.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:00.430 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:43:07.049 3227 DEBUG neutron.agent.l3.agent [req-844a0579-d8b6-4bac-967b-3c29a70f9658 ca1112801c444cb8bc28f82ee41eebed 922a6360856e46299cc3dacf1d33d91a - - -] Got routers updated notification :[u'82a105f3-7ab0-49d9-a897-e1208c7c59a6'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-06-28 20:43:07.051 3227 DEBUG neutron.agent.l3.agent [-] Starting router update for 82a105f3-7ab0-49d9-a897-e1208c7c59a6, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-06-28 20:43:10.501 3227 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks [] for router, before_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 20:43:10.502 3227 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1132
2018-06-28 20:43:10.503 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.529 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:43:10.530 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:43:10.531 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.get_preserve_ips" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:43:10.532 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.get_preserve_ips" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:43:10.533 3227 DEBUG neutron.agent.l3.router_info [-] External gateway added: port({u'allowed_address_pairs': [], u'extra_dhcp_opts': [], u'updated_at': u'2018-06-28T18:43:05Z', u'device_owner': u'network:router_gateway', u'revision_number': 3, u'port_security_enabled': False, u'binding:profile': {}, u'binding:vnic_type': u'normal', u'fixed_ips': [{u'subnet_id': u'42338adf-2e51-4eed-8e47-1b2f9d84cf85', u'prefixlen': 24, u'ip_address': u'172.24.4.12'}], u'id': u'b1d119b0-5efb-4d0d-84af-155eb1b4f096', u'security_groups': [], u'binding:vif_details': {}, u'address_scopes': {u'4': None, u'6': None}, u'binding:vif_type': u'unbound', u'mac_address': u'fa:16:3e:76:92:bf', u'project_id': u'', u'status': u'DOWN', u'subnets': [{u'dns_nameservers': [], u'ipv6_ra_mode': None, u'gateway_ip': u'172.24.4.1', u'cidr': u'172.24.4.0/24', u'id': u'42338adf-2e51-4eed-8e47-1b2f9d84cf85', u'subnetpool_id': None}], u'binding:host_id': u'localhost.localdomain', u'description': u'', u'tags': [], u'device_id': u'82a105f3-7ab0-49d9-a897-e1208c7c59a6', u'name': u'', u'admin_state_up': True, u'network_id': u'badfb9c1-1612-4b74-9d18-206aaffd3895', u'tenant_id': u'', u'created_at': u'2018-06-28T18:43:04Z', u'mtu': 1500, u'extra_subnets': []}), interface(qg-b1d119b0-5e), ns(qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6) _external_gateway_added /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:692
2018-06-28 20:43:10.534 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-o', 'link', 'show', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.561 3227 DEBUG neutron.agent.linux.utils [-] Running command: ['ip', '-o', 'link', 'show', 'br-int'] create_process /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:92
2018-06-28 20:43:10.587 3227 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): DelPortCommand(if_exists=True, bridge=None, port=qg-b1d119b0-5e) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-06-28 20:43:10.588 3227 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Transaction caused no change do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:114
2018-06-28 20:43:10.590 3227 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): AddPortCommand(bridge=br-int, may_exist=False, port=qg-b1d119b0-5e) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-06-28 20:43:10.592 3227 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=1): DbSetCommand(table=Interface, col_values=(('type', 'internal'), ('external_ids', {'iface-id': u'b1d119b0-5efb-4d0d-84af-155eb1b4f096', 'iface-status': 'active', 'attached-mac': u'fa:16:3e:76:92:bf'})), record=qg-b1d119b0-5e) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-06-28 20:43:10.638 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'link', 'set', 'qg-b1d119b0-5e', 'address', 'fa:16:3e:76:92:bf'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.661 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', '-o', 'netns', 'list'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.686 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'link', 'set', 'qg-b1d119b0-5e', 'netns', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.716 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', 'link', 'set', 'qg-b1d119b0-5e', 'mtu', '1500'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.736 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', 'link', 'set', 'qg-b1d119b0-5e', 'up'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.764 3227 DEBUG neutron.agent.linux.interface [-] init_router_port: device_name(qg-b1d119b0-5e), namespace(qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6) init_router_port /usr/lib/python2.7/site-packages/neutron/agent/linux/interface.py:180
2018-06-28 20:43:10.766 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-o', 'link', 'show', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.786 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', 'addr', 'show', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.806 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-4', 'addr', 'add', '172.24.4.12/24', 'scope', 'global', 'dev', 'qg-b1d119b0-5e', 'brd', '172.24.4.255'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.826 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-4', 'route', 'list', 'dev', 'qg-b1d119b0-5e', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.844 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-6', 'route', 'list', 'dev', 'qg-b1d119b0-5e', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.865 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-4', 'route', 'list', 'dev', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.889 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-6', 'route', 'list', 'dev', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.906 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-4', 'route', 'replace', 'default', 'via', '172.24.4.1', 'dev', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.924 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'sysctl', '-w', 'net.ipv6.conf.qg-b1d119b0-5e.accept_ra=2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.944 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'sysctl', '-w', 'net.ipv6.conf.qg-b1d119b0-5e.forwarding=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.963 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.add_gw_interface" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:43:10.963 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.add_gw_interface" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:43:10.964 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.965 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-U', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.12'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:10.988 3227 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 20:43:10.989 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:11.005 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-A', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.12'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:11.019 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:11.039 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:11.070 3227 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 14 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 20:43:11.071 3227 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 20:43:11.072 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', 'addr', 'show', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:11.095 3227 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 20:43:11.096 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:11.120 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:11.135 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:11.151 3227 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 5 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 20:43:11.152 3227 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 20:43:11.153 3227 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.linux.pd.update_router-8774341502845', 'neutron.agent.metadata.driver.after_router_updated-8774340965652'] for router, after_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 20:43:11.154 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.update_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:43:11.154 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.update_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:43:11.155 3227 DEBUG neutron.agent.l3.agent [-] Finished a router update for 82a105f3-7ab0-49d9-a897-e1208c7c59a6 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-06-28 20:43:13.032 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-U', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.12'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:13.057 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-A', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.12'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:15.081 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-U', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.12'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:15.125 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-A', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.12'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:43:16.564 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:43:16.570 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.005s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:43:40.433 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:43:56.791 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:43:56.792 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:44:16.566 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:44:16.571 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.005s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:44:20.436 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:44:37.875 3227 DEBUG neutron.agent.l3.agent [req-9d8c04be-dc31-484b-8985-37624602c0b5 ca1112801c444cb8bc28f82ee41eebed 922a6360856e46299cc3dacf1d33d91a - - -] Got routers updated notification :[u'82a105f3-7ab0-49d9-a897-e1208c7c59a6'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-06-28 20:44:37.879 3227 DEBUG neutron.agent.l3.agent [-] Starting router update for 82a105f3-7ab0-49d9-a897-e1208c7c59a6, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-06-28 20:44:39.016 3227 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks [] for router, before_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 20:44:39.017 3227 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1132
2018-06-28 20:44:39.017 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.067 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:44:39.070 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.003s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:44:39.071 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.get_preserve_ips" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:44:39.072 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.get_preserve_ips" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:44:39.072 3227 DEBUG neutron.agent.l3.router_info [-] External gateway added: port({u'allowed_address_pairs': [], u'extra_dhcp_opts': [], u'updated_at': u'2018-06-28T18:43:13Z', u'device_owner': u'network:router_gateway', u'revision_number': 6, u'port_security_enabled': False, u'binding:profile': {}, u'binding:vnic_type': u'normal', u'fixed_ips': [{u'subnet_id': u'42338adf-2e51-4eed-8e47-1b2f9d84cf85', u'prefixlen': 24, u'ip_address': u'172.24.4.12'}], u'id': u'b1d119b0-5efb-4d0d-84af-155eb1b4f096', u'security_groups': [], u'binding:vif_details': {u'port_filter': True, u'datapath_type': u'system', u'ovs_hybrid_plug': True}, u'address_scopes': {u'4': None, u'6': None}, u'binding:vif_type': u'ovs', u'mac_address': u'fa:16:3e:76:92:bf', u'project_id': u'', u'status': u'ACTIVE', u'subnets': [{u'dns_nameservers': [], u'ipv6_ra_mode': None, u'gateway_ip': u'172.24.4.1', u'cidr': u'172.24.4.0/24', u'id': u'42338adf-2e51-4eed-8e47-1b2f9d84cf85', u'subnetpool_id': None}], u'binding:host_id': u'localhost.localdomain', u'description': u'', u'tags': [], u'device_id': u'82a105f3-7ab0-49d9-a897-e1208c7c59a6', u'name': u'', u'admin_state_up': True, u'network_id': u'badfb9c1-1612-4b74-9d18-206aaffd3895', u'tenant_id': u'', u'created_at': u'2018-06-28T18:43:04Z', u'mtu': 1500, u'extra_subnets': []}), interface(qg-b1d119b0-5e), ns(qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6) _external_gateway_added /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:692
2018-06-28 20:44:39.073 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-o', 'link', 'show', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.096 3227 INFO neutron.agent.linux.interface [-] Device qg-b1d119b0-5e already exists
2018-06-28 20:44:39.097 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', 'link', 'set', 'qg-b1d119b0-5e', 'mtu', '1500'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.122 3227 DEBUG neutron.agent.linux.interface [-] init_router_port: device_name(qg-b1d119b0-5e), namespace(qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6) init_router_port /usr/lib/python2.7/site-packages/neutron/agent/linux/interface.py:180
2018-06-28 20:44:39.123 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-o', 'link', 'show', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.141 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', 'addr', 'show', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.182 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-4', 'route', 'list', 'dev', 'qg-b1d119b0-5e', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.198 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-6', 'route', 'list', 'dev', 'qg-b1d119b0-5e', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.219 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-4', 'route', 'list', 'dev', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.240 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-6', 'route', 'list', 'dev', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.258 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-4', 'route', 'replace', 'default', 'via', '172.24.4.1', 'dev', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.271 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'sysctl', '-w', 'net.ipv6.conf.qg-b1d119b0-5e.accept_ra=2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.290 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'sysctl', '-w', 'net.ipv6.conf.qg-b1d119b0-5e.forwarding=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.305 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.307 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-U', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.12'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.325 3227 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 20:44:39.326 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.337 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-A', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.12'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.356 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.371 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.383 3227 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 7 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 20:44:39.384 3227 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 20:44:39.385 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', 'addr', 'show', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.396 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-4', 'addr', 'add', '172.24.4.8/32', 'scope', 'global', 'dev', 'qg-b1d119b0-5e', 'brd', '172.24.4.8'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.407 3227 DEBUG neutron.agent.l3.router_info [-] Floating ip 721d201b-fdba-4efd-b601-bfb2e162887c added, status ACTIVE process_floating_ip_addresses /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:361
2018-06-28 20:44:39.408 3227 DEBUG neutron.agent.l3.router_info [-] Sending floating ip statuses: {u'721d201b-fdba-4efd-b601-bfb2e162887c': 'ACTIVE'} update_fip_statuses /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:942
2018-06-28 20:44:39.414 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-U', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.8'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.442 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-A', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.8'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.479 3227 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 20:44:39.480 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.503 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:39.519 3227 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 0 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 20:44:39.520 3227 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 20:44:39.520 3227 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.linux.pd.update_router-8774341502845', 'neutron.agent.metadata.driver.after_router_updated-8774340965652'] for router, after_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 20:44:39.521 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.update_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:44:39.521 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.update_router" :: held 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:44:39.521 3227 DEBUG neutron.agent.l3.agent [-] Finished a router update for 82a105f3-7ab0-49d9-a897-e1208c7c59a6 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-06-28 20:44:41.359 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-U', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.12'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:41.382 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-A', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.12'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:41.477 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-U', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.8'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:41.500 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-A', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.8'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:43.409 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-U', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.12'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:43.430 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-A', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.12'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:43.520 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-U', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.8'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:43.538 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'arping', '-A', '-I', 'qg-b1d119b0-5e', '-c', '1', '-w', '1.5', '172.24.4.8'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:44:56.791 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:44:56.792 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:45:00.439 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:45:16.566 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:45:16.570 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.004s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:45:40.441 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:45:56.792 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:45:56.794 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:46:16.566 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:46:16.570 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.004s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:46:20.444 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:46:56.794 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:46:56.796 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.002s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:47:00.445 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:47:16.567 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:47:16.572 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.005s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:47:40.448 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:47:56.795 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:47:56.800 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.005s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:48:16.568 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:48:16.573 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.005s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:48:18.211 3227 DEBUG neutron.agent.l3.agent [req-36dbc177-9359-4883-ad0d-94c35e5c72ce ca1112801c444cb8bc28f82ee41eebed 922a6360856e46299cc3dacf1d33d91a - - -] Got routers updated notification :[u'82a105f3-7ab0-49d9-a897-e1208c7c59a6'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-06-28 20:48:18.213 3227 DEBUG neutron.agent.l3.agent [-] Starting router update for 82a105f3-7ab0-49d9-a897-e1208c7c59a6, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-06-28 20:48:19.468 3227 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks [] for router, before_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 20:48:19.470 3227 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1132
2018-06-28 20:48:19.471 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:48:19.493 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:48:19.493 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:48:19.494 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:48:19.505 3227 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 20:48:19.506 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:48:19.527 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:48:19.543 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:48:19.559 3227 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 7 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 20:48:19.560 3227 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 20:48:19.561 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', 'addr', 'show', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:48:19.575 3227 DEBUG neutron.agent.l3.router_info [-] Removing floating ip 172.24.4.8/32 from interface qg-b1d119b0-5e in namespace qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6 process_floating_ip_addresses /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:384
2018-06-28 20:48:19.576 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-4', 'addr', 'del', '172.24.4.8/32', 'dev', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:48:19.592 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'conntrack', '-D', '-d', '172.24.4.8'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:48:19.606 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'conntrack', '-D', '-q', '172.24.4.8'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:48:19.620 3227 DEBUG neutron.agent.l3.router_info [-] Sending floating ip statuses: {u'721d201b-fdba-4efd-b601-bfb2e162887c': 'DOWN'} update_fip_statuses /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:942
2018-06-28 20:48:19.688 3227 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 20:48:19.689 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:48:19.710 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:48:19.726 3227 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 0 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 20:48:19.727 3227 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 20:48:19.727 3227 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.linux.pd.update_router-8774341502845', 'neutron.agent.metadata.driver.after_router_updated-8774340965652'] for router, after_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 20:48:19.727 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.update_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:48:19.729 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.update_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:48:19.730 3227 DEBUG neutron.agent.l3.agent [-] Finished a router update for 82a105f3-7ab0-49d9-a897-e1208c7c59a6 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-06-28 20:48:20.451 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:48:56.796 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:48:56.797 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:49:00.453 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:49:15.978 3227 DEBUG neutron.agent.l3.agent [req-401a2f54-8cb2-476c-883b-bc2ba8e10ea0 6dc66ca5b9b04acabc59bdf6487de4e0 71ea52d094344aa8ab5e0e5b41870b26 - - -] Got routers updated notification :[u'82a105f3-7ab0-49d9-a897-e1208c7c59a6'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-06-28 20:49:15.983 3227 DEBUG neutron.agent.l3.agent [-] Starting router update for 82a105f3-7ab0-49d9-a897-e1208c7c59a6, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-06-28 20:49:16.568 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:49:16.572 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.004s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:49:17.274 3227 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks [] for router, before_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 20:49:17.275 3227 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1132
2018-06-28 20:49:17.276 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:17.297 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:49:17.298 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:49:17.299 3227 DEBUG neutron.agent.l3.router_info [-] External gateway removed: port({u'allowed_address_pairs': [], u'extra_dhcp_opts': [], u'updated_at': u'2018-06-28T18:43:13Z', u'device_owner': u'network:router_gateway', u'revision_number': 6, u'port_security_enabled': False, u'binding:profile': {}, u'binding:vnic_type': u'normal', u'fixed_ips': [{u'subnet_id': u'42338adf-2e51-4eed-8e47-1b2f9d84cf85', u'prefixlen': 24, u'ip_address': u'172.24.4.12'}], u'id': u'b1d119b0-5efb-4d0d-84af-155eb1b4f096', u'security_groups': [], u'binding:vif_details': {u'port_filter': True, u'datapath_type': u'system', u'ovs_hybrid_plug': True}, u'address_scopes': {u'4': None, u'6': None}, u'binding:vif_type': u'ovs', u'mac_address': u'fa:16:3e:76:92:bf', u'project_id': u'', u'status': u'ACTIVE', u'subnets': [{u'dns_nameservers': [], u'ipv6_ra_mode': None, u'gateway_ip': u'172.24.4.1', u'cidr': u'172.24.4.0/24', u'id': u'42338adf-2e51-4eed-8e47-1b2f9d84cf85', u'subnetpool_id': None}], u'binding:host_id': u'localhost.localdomain', u'description': u'', u'tags': [], u'device_id': u'82a105f3-7ab0-49d9-a897-e1208c7c59a6', u'name': u'', u'admin_state_up': True, u'network_id': u'badfb9c1-1612-4b74-9d18-206aaffd3895', u'tenant_id': u'', u'created_at': u'2018-06-28T18:43:04Z', u'mtu': 1500, u'extra_subnets': []}), interface(qg-b1d119b0-5e) external_gateway_removed /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:753
2018-06-28 20:49:17.300 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-4', 'addr', 'del', '172.24.4.12/24', 'dev', 'qg-b1d119b0-5e'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:17.320 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'conntrack', '-D', '-d', '172.24.4.12'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:17.337 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'conntrack', '-D', '-q', '172.24.4.12'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:17.354 3227 DEBUG neutron.agent.linux.utils [-] Running command: ['ip', '-o', 'link', 'show', 'br-int'] create_process /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:92
2018-06-28 20:49:17.377 3227 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): DelPortCommand(if_exists=True, bridge=br-int, port=qg-b1d119b0-5e) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-06-28 20:49:17.415 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.remove_gw_interface" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:49:17.416 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.remove_gw_interface" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:49:17.417 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:17.437 3227 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 20:49:17.438 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:17.462 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:17.478 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:17.498 3227 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 13 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 20:49:17.499 3227 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 20:49:17.500 3227 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 20:49:17.501 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:17.526 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:17.543 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:17.564 3227 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 5 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 20:49:17.564 3227 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 20:49:17.565 3227 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.linux.pd.update_router-8774341502845', 'neutron.agent.metadata.driver.after_router_updated-8774340965652'] for router, after_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 20:49:17.566 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.update_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:49:17.567 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.update_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:49:17.568 3227 DEBUG neutron.agent.l3.agent [-] Finished a router update for 82a105f3-7ab0-49d9-a897-e1208c7c59a6 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-06-28 20:49:36.887 3227 DEBUG neutron.agent.l3.agent [req-aaff282f-e3e6-46a1-8679-8e083c65fc68 6dc66ca5b9b04acabc59bdf6487de4e0 71ea52d094344aa8ab5e0e5b41870b26 - - -] Got routers updated notification :[u'82a105f3-7ab0-49d9-a897-e1208c7c59a6'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-06-28 20:49:36.892 3227 DEBUG neutron.agent.l3.agent [-] Starting router update for 82a105f3-7ab0-49d9-a897-e1208c7c59a6, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-06-28 20:49:37.291 3227 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks [] for router, before_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 20:49:37.291 3227 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1132
2018-06-28 20:49:37.292 3227 DEBUG neutron.agent.l3.router_info [-] removing internal network: port(a73b94f4-ba61-4f66-bc89-29fe8497c6b1) interface(qr-a73b94f4-ba) internal_network_removed /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:477
2018-06-28 20:49:37.293 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip', '-o', 'link', 'show', 'qr-a73b94f4-ba'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:37.314 3227 DEBUG neutron.agent.linux.utils [-] Running command: ['ip', '-o', 'link', 'show', 'br-int'] create_process /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:92
2018-06-28 20:49:37.341 3227 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): DelPortCommand(if_exists=True, bridge=br-int, port=qr-a73b94f4-ba) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-06-28 20:49:37.389 3227 DEBUG neutron.agent.l3.router_info [-] removing port {u'allowed_address_pairs': [], u'extra_dhcp_opts': [], u'updated_at': u'2018-06-28T18:42:50Z', u'device_owner': u'network:router_interface', u'revision_number': 4, u'port_security_enabled': False, u'binding:profile': {}, u'binding:vnic_type': u'normal', u'fixed_ips': [{u'subnet_id': u'54d3498b-2745-4cdd-bac5-325b4ff172eb', u'prefixlen': 24, u'ip_address': u'11.102.1.1'}], u'id': u'a73b94f4-ba61-4f66-bc89-29fe8497c6b1', u'security_groups': [], u'binding:vif_details': {}, u'address_scopes': {u'4': None, u'6': None}, u'binding:vif_type': u'unbound', u'mac_address': u'fa:16:3e:8c:e6:70', u'project_id': u'922a6360856e46299cc3dacf1d33d91a', u'status': u'DOWN', u'subnets': [{u'dns_nameservers': [u'8.8.4.4'], u'ipv6_ra_mode': None, u'gateway_ip': u'11.102.1.1', u'cidr': u'11.102.1.0/24', u'id': u'54d3498b-2745-4cdd-bac5-325b4ff172eb', u'subnetpool_id': None}], u'binding:host_id': u'localhost.localdomain', u'description': u'', u'tags': [], u'device_id': u'82a105f3-7ab0-49d9-a897-e1208c7c59a6', u'name': u'', u'admin_state_up': True, u'network_id': u'48e9581e-671e-43b1-aed0-aa9a246f2829', u'tenant_id': u'922a6360856e46299cc3dacf1d33d91a', u'created_at': u'2018-06-28T18:42:47Z', u'mtu': 1450, u'extra_subnets': []} from internal_ports cache _process_internal_ports /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:567
2018-06-28 20:49:37.391 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:37.418 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:49:37.419 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.002s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:49:37.420 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:37.441 3227 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 20:49:37.443 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:37.473 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:37.501 3227 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 0 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 20:49:37.502 3227 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 20:49:37.503 3227 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 20:49:37.504 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:37.536 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:37.554 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:37.580 3227 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 10 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 20:49:37.581 3227 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 20:49:37.581 3227 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.linux.pd.update_router-8774341502845', 'neutron.agent.metadata.driver.after_router_updated-8774340965652'] for router, after_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 20:49:37.582 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.update_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:49:37.583 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.update_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:49:37.584 3227 DEBUG neutron.agent.l3.agent [-] Finished a router update for 82a105f3-7ab0-49d9-a897-e1208c7c59a6 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-06-28 20:49:40.456 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:49:46.075 3227 DEBUG neutron.agent.l3.agent [req-76abe57f-8ce4-45a0-8bc5-61b10e473fb8 6dc66ca5b9b04acabc59bdf6487de4e0 71ea52d094344aa8ab5e0e5b41870b26 - - -] Got router deleted notification for 82a105f3-7ab0-49d9-a897-e1208c7c59a6 router_deleted /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:424
2018-06-28 20:49:46.079 3227 DEBUG neutron.agent.l3.agent [-] Starting router update for 82a105f3-7ab0-49d9-a897-e1208c7c59a6, action 1, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-06-28 20:49:46.079 3227 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.metadata.driver.before_router_removed--9223363262513810149'] for router, before_delete _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 20:49:46.082 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['kill', '-9', '7617'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:46.100 3227 DEBUG neutron.agent.l3.router_info [-] process router delete process_delete /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1114
2018-06-28 20:49:46.101 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', '-o', 'netns', 'list'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:46.135 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:46.151 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:49:46.152 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:49:46.153 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:46.170 3227 DEBUG neutron.agent.l3.router_info [-] Terminating radvd daemon in router device: 82a105f3-7ab0-49d9-a897-e1208c7c59a6 disable_radvd /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:520
2018-06-28 20:49:46.171 3227 DEBUG neutron.agent.linux.utils [-] Unable to access /var/lib/neutron/external/pids/82a105f3-7ab0-49d9-a897-e1208c7c59a6.pid.radvd get_value_from_file /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:254
2018-06-28 20:49:46.171 3227 DEBUG neutron.agent.linux.utils [-] Unable to access /var/lib/neutron/external/pids/82a105f3-7ab0-49d9-a897-e1208c7c59a6.pid.radvd get_value_from_file /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:254
2018-06-28 20:49:46.172 3227 DEBUG neutron.agent.linux.external_process [-] No process started for 82a105f3-7ab0-49d9-a897-e1208c7c59a6 disable /usr/lib/python2.7/site-packages/neutron/agent/linux/external_process.py:126
2018-06-28 20:49:46.173 3227 DEBUG neutron.agent.linux.ra [-] radvd disabled for router 82a105f3-7ab0-49d9-a897-e1208c7c59a6 disable /usr/lib/python2.7/site-packages/neutron/agent/linux/ra.py:190
2018-06-28 20:49:46.174 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', '-o', 'netns', 'list'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:46.187 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:46.203 3227 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'delete', 'qrouter-82a105f3-7ab0-49d9-a897-e1208c7c59a6'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 20:49:46.216 3227 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.linux.pd.remove_router--9223363262513273001'] for router, after_delete _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 20:49:46.217 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.remove_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:49:46.218 3227 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.remove_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:49:46.219 3227 DEBUG neutron.agent.l3.agent [-] Finished a router update for 82a105f3-7ab0-49d9-a897-e1208c7c59a6 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:564
2018-06-28 20:49:56.796 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:49:56.798 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.002s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:50:16.568 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:50:16.570 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.003s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:50:20.460 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 20:50:56.798 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 20:50:56.799 3227 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.002s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 20:51:00.463 3227 DEBUG oslo_service.periodic_task [req-6f7634e9-f4f2-49d9-a8ae-90134733b2b3 - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
