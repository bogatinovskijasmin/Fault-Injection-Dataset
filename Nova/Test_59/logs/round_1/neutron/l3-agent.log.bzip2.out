2018-06-28 04:53:00.704 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:53:00.705 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:53:04.315 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:53:04.318 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.003s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:53:06.362 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 04:53:46.364 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 04:54:00.713 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:54:00.714 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:54:04.315 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:54:04.319 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.004s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:54:26.372 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 04:55:00.724 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:55:00.725 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:55:04.316 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:55:04.319 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.004s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:55:06.376 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 04:55:46.378 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 04:56:00.733 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:56:00.734 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:56:04.316 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:56:04.319 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.003s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:56:26.388 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 04:56:27.564 31152 DEBUG neutron.agent.l3.agent [req-980211e7-32b2-430d-9e0c-86cd49940e27 4990181b6c074c00a052c4700cd8ad5d 33b10b76b5ff42d4aea1c3486565316a - - -] Got routers updated notification :[u'f3f62c2a-3a5f-4238-aa66-e31e9e25b340'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-06-28 04:56:27.567 31152 DEBUG neutron.agent.l3.agent [-] Starting router update for f3f62c2a-3a5f-4238-aa66-e31e9e25b340, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-06-28 04:56:30.843 31152 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.linux.pd.add_router-8753339849296'] for router, before_create _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 04:56:30.844 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.add_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:56:30.845 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.add_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:56:30.846 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', '-o', 'netns', 'list'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:30.863 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'add', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:30.891 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'sysctl', '-w', 'net.ipv4.conf.all.promote_secondaries=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:30.910 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', 'link', 'set', 'lo', 'up'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:30.927 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'sysctl', '-w', 'net.ipv4.ip_forward=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:30.945 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'sysctl', '-w', 'net.ipv4.conf.all.arp_ignore=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:30.967 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'sysctl', '-w', 'net.ipv4.conf.all.arp_announce=2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:30.988 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'sysctl', '-w', 'net.ipv6.conf.all.forwarding=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.006 31152 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1132
2018-06-28 04:56:31.007 31152 DEBUG neutron.agent.l3.router_info [-] adding internal network: prefix(qr-), port(7054cd04-456c-4fe7-85d7-e52c531e9ca9) _internal_network_added /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:444
2018-06-28 04:56:31.008 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-o', 'link', 'show', 'qr-7054cd04-45'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.033 31152 DEBUG neutron.agent.linux.utils [-] Running command: ['ip', '-o', 'link', 'show', 'br-int'] create_process /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:92
2018-06-28 04:56:31.352 31152 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): DelPortCommand(if_exists=True, bridge=None, port=qr-7054cd04-45) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-06-28 04:56:31.354 31152 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Transaction caused no change do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:114
2018-06-28 04:56:31.359 31152 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): AddPortCommand(bridge=br-int, may_exist=False, port=qr-7054cd04-45) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-06-28 04:56:31.360 31152 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=1): DbSetCommand(table=Interface, col_values=(('type', 'internal'), ('external_ids', {'iface-id': u'7054cd04-456c-4fe7-85d7-e52c531e9ca9', 'iface-status': 'active', 'attached-mac': u'fa:16:3e:15:76:63'})), record=qr-7054cd04-45) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-06-28 04:56:31.401 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'link', 'set', 'qr-7054cd04-45', 'address', 'fa:16:3e:15:76:63'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.416 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', '-o', 'netns', 'list'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.435 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'link', 'set', 'qr-7054cd04-45', 'netns', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.456 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', 'link', 'set', 'qr-7054cd04-45', 'mtu', '1450'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.471 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', 'link', 'set', 'qr-7054cd04-45', 'up'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.488 31152 DEBUG neutron.agent.linux.interface [-] init_router_port: device_name(qr-7054cd04-45), namespace(qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340) init_router_port /usr/lib/python2.7/site-packages/neutron/agent/linux/interface.py:180
2018-06-28 04:56:31.489 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-o', 'link', 'show', 'qr-7054cd04-45'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.506 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', 'addr', 'show', 'qr-7054cd04-45'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.520 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-4', 'addr', 'add', '11.220.1.1/24', 'scope', 'global', 'dev', 'qr-7054cd04-45', 'brd', '11.220.1.255'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.537 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-4', 'route', 'list', 'dev', 'qr-7054cd04-45', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.556 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-6', 'route', 'list', 'dev', 'qr-7054cd04-45', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.573 31152 DEBUG neutron.agent.l3.router_info [-] appending port {u'allowed_address_pairs': [], u'extra_dhcp_opts': [], u'updated_at': u'2018-06-28T02:56:26Z', u'device_owner': u'network:router_interface', u'revision_number': 4, u'port_security_enabled': False, u'binding:profile': {}, u'binding:vnic_type': u'normal', u'fixed_ips': [{u'subnet_id': u'6e0226bf-9079-43cc-a9c9-12558a221830', u'prefixlen': 24, u'ip_address': u'11.220.1.1'}], u'id': u'7054cd04-456c-4fe7-85d7-e52c531e9ca9', u'security_groups': [], u'binding:vif_details': {}, u'address_scopes': {u'4': None, u'6': None}, u'binding:vif_type': u'unbound', u'mac_address': u'fa:16:3e:15:76:63', u'project_id': u'33b10b76b5ff42d4aea1c3486565316a', u'status': u'DOWN', u'subnets': [{u'dns_nameservers': [u'8.8.4.4'], u'ipv6_ra_mode': None, u'gateway_ip': u'11.220.1.1', u'cidr': u'11.220.1.0/24', u'id': u'6e0226bf-9079-43cc-a9c9-12558a221830', u'subnetpool_id': None}], u'binding:host_id': u'localhost.localdomain', u'description': u'', u'tags': [], u'device_id': u'f3f62c2a-3a5f-4238-aa66-e31e9e25b340', u'name': u'', u'admin_state_up': True, u'network_id': u'f687fcd1-13db-413c-b3aa-03bba91cd90b', u'tenant_id': u'33b10b76b5ff42d4aea1c3486565316a', u'created_at': u'2018-06-28T02:56:24Z', u'mtu': 1450, u'extra_subnets': []} to internal_ports cache _process_internal_ports /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:555
2018-06-28 04:56:31.575 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.576 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-U', '-I', 'qr-7054cd04-45', '-c', '1', '-w', '1.5', '11.220.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.595 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:56:31.596 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:56:31.597 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.611 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-A', '-I', 'qr-7054cd04-45', '-c', '1', '-w', '1.5', '11.220.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.614 31152 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 04:56:31.617 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.647 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.668 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.688 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip6tables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.706 31152 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 106 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 04:56:31.708 31152 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 04:56:31.709 31152 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 04:56:31.710 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.735 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.752 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.775 31152 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 10 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 04:56:31.777 31152 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 04:56:31.778 31152 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.metadata.driver.after_router_added-8753339309829'] for router, after_create _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 04:56:31.779 31152 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 04:56:31.781 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.804 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.824 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.847 31152 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 17 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 04:56:31.849 31152 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 04:56:31.851 31152 DEBUG neutron.agent.linux.utils [-] Unable to access /var/lib/neutron/external/pids/f3f62c2a-3a5f-4238-aa66-e31e9e25b340.pid get_value_from_file /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:254
2018-06-28 04:56:31.852 31152 DEBUG neutron.agent.linux.utils [-] Unable to access /var/lib/neutron/external/pids/f3f62c2a-3a5f-4238-aa66-e31e9e25b340.pid get_value_from_file /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:254
2018-06-28 04:56:31.855 31152 DEBUG neutron.agent.metadata.driver [-] haproxy_cfg = 
global
    log         /dev/log local0 debug
    log-tag     haproxy-metadata-proxy-f3f62c2a-3a5f-4238-aa66-e31e9e25b340
    user        neutron
    group       neutron
    maxconn     1024
    pidfile     /var/lib/neutron/external/pids/f3f62c2a-3a5f-4238-aa66-e31e9e25b340.pid
    daemon

defaults
    log global
    mode http
    option httplog
    option dontlognull
    option http-server-close
    option forwardfor
    retries                 3
    timeout http-request    30s
    timeout connect         30s
    timeout client          32s
    timeout server          32s
    timeout http-keep-alive 30s

listen listener
    bind 0.0.0.0:9697
    server metadata /var/lib/neutron/metadata_proxy
    http-request add-header X-Neutron-Router-ID f3f62c2a-3a5f-4238-aa66-e31e9e25b340
 create_config_file /usr/lib/python2.7/site-packages/neutron/agent/metadata/driver.py:135
2018-06-28 04:56:31.856 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'haproxy', '-f', '/var/lib/neutron/ns-metadata-proxy/f3f62c2a-3a5f-4238-aa66-e31e9e25b340.conf'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:31.894 31152 DEBUG neutron.agent.l3.agent [-] Finished a router update for f3f62c2a-3a5f-4238-aa66-e31e9e25b340 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-06-28 04:56:33.649 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-U', '-I', 'qr-7054cd04-45', '-c', '1', '-w', '1.5', '11.220.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:33.672 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-A', '-I', 'qr-7054cd04-45', '-c', '1', '-w', '1.5', '11.220.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:35.700 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-U', '-I', 'qr-7054cd04-45', '-c', '1', '-w', '1.5', '11.220.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:35.729 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-A', '-I', 'qr-7054cd04-45', '-c', '1', '-w', '1.5', '11.220.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:42.080 31152 DEBUG neutron.agent.l3.agent [req-be34431b-c526-40bd-a611-bab93c1e422d 4990181b6c074c00a052c4700cd8ad5d 33b10b76b5ff42d4aea1c3486565316a - - -] Got routers updated notification :[u'f3f62c2a-3a5f-4238-aa66-e31e9e25b340'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-06-28 04:56:42.085 31152 DEBUG neutron.agent.l3.agent [-] Starting router update for f3f62c2a-3a5f-4238-aa66-e31e9e25b340, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-06-28 04:56:46.558 31152 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks [] for router, before_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 04:56:46.559 31152 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1132
2018-06-28 04:56:46.560 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.584 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:56:46.586 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:56:46.586 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.get_preserve_ips" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:56:46.587 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.get_preserve_ips" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:56:46.588 31152 DEBUG neutron.agent.l3.router_info [-] External gateway added: port({u'allowed_address_pairs': [], u'extra_dhcp_opts': [], u'updated_at': u'2018-06-28T02:56:40Z', u'device_owner': u'network:router_gateway', u'revision_number': 3, u'port_security_enabled': False, u'binding:profile': {}, u'binding:vnic_type': u'normal', u'fixed_ips': [{u'subnet_id': u'4c4b2f34-8d32-4a55-b583-46e460575449', u'prefixlen': 24, u'ip_address': u'172.24.4.2'}], u'id': u'2cc1caf2-c149-4656-840c-ccde507a74b8', u'security_groups': [], u'binding:vif_details': {}, u'address_scopes': {u'4': None, u'6': None}, u'binding:vif_type': u'unbound', u'mac_address': u'fa:16:3e:f9:f4:55', u'project_id': u'', u'status': u'DOWN', u'subnets': [{u'dns_nameservers': [], u'ipv6_ra_mode': None, u'gateway_ip': u'172.24.4.1', u'cidr': u'172.24.4.0/24', u'id': u'4c4b2f34-8d32-4a55-b583-46e460575449', u'subnetpool_id': None}], u'binding:host_id': u'localhost.localdomain', u'description': u'', u'tags': [], u'device_id': u'f3f62c2a-3a5f-4238-aa66-e31e9e25b340', u'name': u'', u'admin_state_up': True, u'network_id': u'bccef923-8280-488c-84aa-955d7841d8ff', u'tenant_id': u'', u'created_at': u'2018-06-28T02:56:39Z', u'mtu': 1500, u'extra_subnets': []}), interface(qg-2cc1caf2-c1), ns(qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340) _external_gateway_added /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:692
2018-06-28 04:56:46.589 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-o', 'link', 'show', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.614 31152 DEBUG neutron.agent.linux.utils [-] Running command: ['ip', '-o', 'link', 'show', 'br-int'] create_process /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:92
2018-06-28 04:56:46.647 31152 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): DelPortCommand(if_exists=True, bridge=None, port=qg-2cc1caf2-c1) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-06-28 04:56:46.649 31152 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Transaction caused no change do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:114
2018-06-28 04:56:46.652 31152 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): AddPortCommand(bridge=br-int, may_exist=False, port=qg-2cc1caf2-c1) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-06-28 04:56:46.654 31152 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=1): DbSetCommand(table=Interface, col_values=(('type', 'internal'), ('external_ids', {'iface-id': u'2cc1caf2-c149-4656-840c-ccde507a74b8', 'iface-status': 'active', 'attached-mac': u'fa:16:3e:f9:f4:55'})), record=qg-2cc1caf2-c1) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-06-28 04:56:46.699 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'link', 'set', 'qg-2cc1caf2-c1', 'address', 'fa:16:3e:f9:f4:55'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.716 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', '-o', 'netns', 'list'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.731 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'link', 'set', 'qg-2cc1caf2-c1', 'netns', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.751 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', 'link', 'set', 'qg-2cc1caf2-c1', 'mtu', '1500'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.767 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', 'link', 'set', 'qg-2cc1caf2-c1', 'up'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.784 31152 DEBUG neutron.agent.linux.interface [-] init_router_port: device_name(qg-2cc1caf2-c1), namespace(qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340) init_router_port /usr/lib/python2.7/site-packages/neutron/agent/linux/interface.py:180
2018-06-28 04:56:46.785 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-o', 'link', 'show', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.800 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', 'addr', 'show', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.815 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-4', 'addr', 'add', '172.24.4.2/24', 'scope', 'global', 'dev', 'qg-2cc1caf2-c1', 'brd', '172.24.4.255'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.831 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-4', 'route', 'list', 'dev', 'qg-2cc1caf2-c1', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.848 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-6', 'route', 'list', 'dev', 'qg-2cc1caf2-c1', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.864 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-4', 'route', 'list', 'dev', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.884 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-6', 'route', 'list', 'dev', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.902 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-4', 'route', 'replace', 'default', 'via', '172.24.4.1', 'dev', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.916 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'sysctl', '-w', 'net.ipv6.conf.qg-2cc1caf2-c1.accept_ra=2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.943 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'sysctl', '-w', 'net.ipv6.conf.qg-2cc1caf2-c1.forwarding=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.968 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.add_gw_interface" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:56:46.970 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.add_gw_interface" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:56:46.971 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.972 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-U', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:46.994 31152 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 04:56:46.996 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:47.007 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-A', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:47.028 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:47.045 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:47.069 31152 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 14 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 04:56:47.071 31152 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 04:56:47.072 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', 'addr', 'show', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:47.094 31152 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 04:56:47.096 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:47.128 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:47.145 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:47.166 31152 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 5 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 04:56:47.166 31152 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 04:56:47.167 31152 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.linux.pd.update_router-8753339849311', 'neutron.agent.metadata.driver.after_router_updated--9223363283515465747'] for router, after_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 04:56:47.168 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.update_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:56:47.169 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.update_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:56:47.169 31152 DEBUG neutron.agent.l3.agent [-] Finished a router update for f3f62c2a-3a5f-4238-aa66-e31e9e25b340 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-06-28 04:56:49.031 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-U', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:49.060 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-A', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:51.085 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-U', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:56:51.111 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-A', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:57:00.737 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:57:00.737 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:57:04.316 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:57:04.319 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.003s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:57:06.391 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 04:57:46.396 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 04:58:00.740 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:58:00.741 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:58:04.317 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:58:04.322 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.005s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:58:16.537 31152 DEBUG neutron.agent.l3.agent [req-12daf718-1c00-47db-8c8c-a55518ed69a0 4990181b6c074c00a052c4700cd8ad5d 33b10b76b5ff42d4aea1c3486565316a - - -] Got routers updated notification :[u'f3f62c2a-3a5f-4238-aa66-e31e9e25b340'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-06-28 04:58:16.539 31152 DEBUG neutron.agent.l3.agent [-] Starting router update for f3f62c2a-3a5f-4238-aa66-e31e9e25b340, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-06-28 04:58:17.517 31152 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks [] for router, before_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 04:58:17.517 31152 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1132
2018-06-28 04:58:17.518 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.547 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:58:17.548 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:58:17.549 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.get_preserve_ips" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:58:17.550 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.get_preserve_ips" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:58:17.551 31152 DEBUG neutron.agent.l3.router_info [-] External gateway added: port({u'allowed_address_pairs': [], u'extra_dhcp_opts': [], u'updated_at': u'2018-06-28T02:56:48Z', u'device_owner': u'network:router_gateway', u'revision_number': 6, u'port_security_enabled': False, u'binding:profile': {}, u'binding:vnic_type': u'normal', u'fixed_ips': [{u'subnet_id': u'4c4b2f34-8d32-4a55-b583-46e460575449', u'prefixlen': 24, u'ip_address': u'172.24.4.2'}], u'id': u'2cc1caf2-c149-4656-840c-ccde507a74b8', u'security_groups': [], u'binding:vif_details': {u'port_filter': True, u'datapath_type': u'system', u'ovs_hybrid_plug': True}, u'address_scopes': {u'4': None, u'6': None}, u'binding:vif_type': u'ovs', u'mac_address': u'fa:16:3e:f9:f4:55', u'project_id': u'', u'status': u'ACTIVE', u'subnets': [{u'dns_nameservers': [], u'ipv6_ra_mode': None, u'gateway_ip': u'172.24.4.1', u'cidr': u'172.24.4.0/24', u'id': u'4c4b2f34-8d32-4a55-b583-46e460575449', u'subnetpool_id': None}], u'binding:host_id': u'localhost.localdomain', u'description': u'', u'tags': [], u'device_id': u'f3f62c2a-3a5f-4238-aa66-e31e9e25b340', u'name': u'', u'admin_state_up': True, u'network_id': u'bccef923-8280-488c-84aa-955d7841d8ff', u'tenant_id': u'', u'created_at': u'2018-06-28T02:56:39Z', u'mtu': 1500, u'extra_subnets': []}), interface(qg-2cc1caf2-c1), ns(qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340) _external_gateway_added /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:692
2018-06-28 04:58:17.552 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-o', 'link', 'show', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.573 31152 INFO neutron.agent.linux.interface [-] Device qg-2cc1caf2-c1 already exists
2018-06-28 04:58:17.574 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', 'link', 'set', 'qg-2cc1caf2-c1', 'mtu', '1500'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.593 31152 DEBUG neutron.agent.linux.interface [-] init_router_port: device_name(qg-2cc1caf2-c1), namespace(qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340) init_router_port /usr/lib/python2.7/site-packages/neutron/agent/linux/interface.py:180
2018-06-28 04:58:17.594 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-o', 'link', 'show', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.612 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', 'addr', 'show', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.628 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-4', 'route', 'list', 'dev', 'qg-2cc1caf2-c1', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.642 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-6', 'route', 'list', 'dev', 'qg-2cc1caf2-c1', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.656 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-4', 'route', 'list', 'dev', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.671 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-6', 'route', 'list', 'dev', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.684 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-4', 'route', 'replace', 'default', 'via', '172.24.4.1', 'dev', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.698 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'sysctl', '-w', 'net.ipv6.conf.qg-2cc1caf2-c1.accept_ra=2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.716 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'sysctl', '-w', 'net.ipv6.conf.qg-2cc1caf2-c1.forwarding=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.734 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.735 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-U', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.770 31152 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 04:58:17.771 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.780 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-A', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.801 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.819 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.837 31152 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 7 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 04:58:17.838 31152 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 04:58:17.839 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', 'addr', 'show', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.855 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-4', 'addr', 'add', '172.24.4.11/32', 'scope', 'global', 'dev', 'qg-2cc1caf2-c1', 'brd', '172.24.4.11'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.870 31152 DEBUG neutron.agent.l3.router_info [-] Floating ip ee64a474-12b0-4fcf-94fe-28a98b06e67f added, status ACTIVE process_floating_ip_addresses /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:361
2018-06-28 04:58:17.871 31152 DEBUG neutron.agent.l3.router_info [-] Sending floating ip statuses: {u'ee64a474-12b0-4fcf-94fe-28a98b06e67f': 'ACTIVE'} update_fip_statuses /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:942
2018-06-28 04:58:17.878 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-U', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.11'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.902 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-A', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.11'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.945 31152 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 04:58:17.946 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.967 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:17.983 31152 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 0 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 04:58:17.984 31152 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 04:58:17.985 31152 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.linux.pd.update_router-8753339849311', 'neutron.agent.metadata.driver.after_router_updated--9223363283515465747'] for router, after_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 04:58:17.986 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.update_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:58:17.987 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.update_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:58:17.988 31152 DEBUG neutron.agent.l3.agent [-] Finished a router update for f3f62c2a-3a5f-4238-aa66-e31e9e25b340 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-06-28 04:58:19.803 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-U', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:19.838 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-A', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:19.919 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-U', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.11'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:19.948 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-A', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.11'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:21.865 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-U', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:21.892 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-A', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:21.986 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-U', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.11'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:22.009 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'arping', '-A', '-I', 'qg-2cc1caf2-c1', '-c', '1', '-w', '1.5', '172.24.4.11'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 04:58:26.402 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 04:59:00.743 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:59:00.744 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:59:04.317 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 04:59:04.322 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.005s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 04:59:06.396 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 04:59:46.398 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 05:00:00.746 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:00:00.747 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:00:04.317 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:00:04.321 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.004s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:00:26.405 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 05:01:00.749 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:01:00.750 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:01:04.317 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:01:04.321 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.004s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:01:06.408 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 05:01:46.411 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 05:02:00.752 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:02:00.754 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:02:04.317 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:02:04.321 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.004s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:02:26.416 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 05:03:00.753 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:03:00.754 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:03:04.318 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:03:04.326 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.008s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:03:06.419 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 05:03:46.421 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 05:04:00.754 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:04:00.755 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:04:04.319 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:04:04.322 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.003s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:04:26.426 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 05:04:44.427 31152 DEBUG neutron.agent.l3.agent [req-f879b4d5-af1c-4ade-acd4-95092e79883b 4990181b6c074c00a052c4700cd8ad5d 33b10b76b5ff42d4aea1c3486565316a - - -] Got routers updated notification :[u'f3f62c2a-3a5f-4238-aa66-e31e9e25b340'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-06-28 05:04:44.430 31152 DEBUG neutron.agent.l3.agent [-] Starting router update for f3f62c2a-3a5f-4238-aa66-e31e9e25b340, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-06-28 05:04:45.785 31152 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks [] for router, before_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 05:04:45.786 31152 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1132
2018-06-28 05:04:45.787 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:04:45.810 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:04:45.811 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:04:45.812 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:04:45.827 31152 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 05:04:45.828 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:04:45.852 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:04:45.867 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:04:45.887 31152 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 7 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 05:04:45.888 31152 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 05:04:45.889 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', 'addr', 'show', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:04:45.904 31152 DEBUG neutron.agent.l3.router_info [-] Removing floating ip 172.24.4.11/32 from interface qg-2cc1caf2-c1 in namespace qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340 process_floating_ip_addresses /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:384
2018-06-28 05:04:45.905 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-4', 'addr', 'del', '172.24.4.11/32', 'dev', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:04:45.920 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'conntrack', '-D', '-d', '172.24.4.11'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:04:45.935 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'conntrack', '-D', '-q', '172.24.4.11'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:04:45.950 31152 DEBUG neutron.agent.l3.router_info [-] Sending floating ip statuses: {u'ee64a474-12b0-4fcf-94fe-28a98b06e67f': 'DOWN'} update_fip_statuses /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:942
2018-06-28 05:04:46.016 31152 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 05:04:46.017 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:04:46.039 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:04:46.057 31152 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 0 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 05:04:46.058 31152 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 05:04:46.059 31152 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.linux.pd.update_router-8753339849311', 'neutron.agent.metadata.driver.after_router_updated--9223363283515465747'] for router, after_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 05:04:46.059 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.update_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:04:46.060 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.update_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:04:46.061 31152 DEBUG neutron.agent.l3.agent [-] Finished a router update for f3f62c2a-3a5f-4238-aa66-e31e9e25b340 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-06-28 05:05:00.754 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:05:00.755 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:05:04.319 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:05:04.325 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.006s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:05:06.429 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 05:05:43.323 31152 DEBUG neutron.agent.l3.agent [req-060d4be3-2fab-4875-9aee-ba9482f1c189 82758ee9dbed4bdf919e32bc6135cc36 f7db0ec7eef2499fb14973cea9da1187 - - -] Got routers updated notification :[u'f3f62c2a-3a5f-4238-aa66-e31e9e25b340'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-06-28 05:05:43.327 31152 DEBUG neutron.agent.l3.agent [-] Starting router update for f3f62c2a-3a5f-4238-aa66-e31e9e25b340, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-06-28 05:05:44.280 31152 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks [] for router, before_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 05:05:44.280 31152 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1132
2018-06-28 05:05:44.281 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:05:44.307 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:05:44.308 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:05:44.308 31152 DEBUG neutron.agent.l3.router_info [-] External gateway removed: port({u'allowed_address_pairs': [], u'extra_dhcp_opts': [], u'updated_at': u'2018-06-28T02:56:48Z', u'device_owner': u'network:router_gateway', u'revision_number': 6, u'port_security_enabled': False, u'binding:profile': {}, u'binding:vnic_type': u'normal', u'fixed_ips': [{u'subnet_id': u'4c4b2f34-8d32-4a55-b583-46e460575449', u'prefixlen': 24, u'ip_address': u'172.24.4.2'}], u'id': u'2cc1caf2-c149-4656-840c-ccde507a74b8', u'security_groups': [], u'binding:vif_details': {u'port_filter': True, u'datapath_type': u'system', u'ovs_hybrid_plug': True}, u'address_scopes': {u'4': None, u'6': None}, u'binding:vif_type': u'ovs', u'mac_address': u'fa:16:3e:f9:f4:55', u'project_id': u'', u'status': u'ACTIVE', u'subnets': [{u'dns_nameservers': [], u'ipv6_ra_mode': None, u'gateway_ip': u'172.24.4.1', u'cidr': u'172.24.4.0/24', u'id': u'4c4b2f34-8d32-4a55-b583-46e460575449', u'subnetpool_id': None}], u'binding:host_id': u'localhost.localdomain', u'description': u'', u'tags': [], u'device_id': u'f3f62c2a-3a5f-4238-aa66-e31e9e25b340', u'name': u'', u'admin_state_up': True, u'network_id': u'bccef923-8280-488c-84aa-955d7841d8ff', u'tenant_id': u'', u'created_at': u'2018-06-28T02:56:39Z', u'mtu': 1500, u'extra_subnets': []}), interface(qg-2cc1caf2-c1) external_gateway_removed /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:753
2018-06-28 05:05:44.310 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-4', 'addr', 'del', '172.24.4.2/24', 'dev', 'qg-2cc1caf2-c1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:05:44.329 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'conntrack', '-D', '-d', '172.24.4.2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:05:44.354 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'conntrack', '-D', '-q', '172.24.4.2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:05:44.375 31152 DEBUG neutron.agent.linux.utils [-] Running command: ['ip', '-o', 'link', 'show', 'br-int'] create_process /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:92
2018-06-28 05:05:44.401 31152 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): DelPortCommand(if_exists=True, bridge=br-int, port=qg-2cc1caf2-c1) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-06-28 05:05:44.446 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.remove_gw_interface" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:05:44.447 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.remove_gw_interface" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:05:44.448 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:05:44.468 31152 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 05:05:44.471 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:05:44.500 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:05:44.516 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:05:44.536 31152 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 13 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 05:05:44.537 31152 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 05:05:44.539 31152 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 05:05:44.540 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:05:44.562 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:05:44.576 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:05:44.593 31152 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 5 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 05:05:44.593 31152 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 05:05:44.594 31152 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.linux.pd.update_router-8753339849311', 'neutron.agent.metadata.driver.after_router_updated--9223363283515465747'] for router, after_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 05:05:44.596 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.update_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:05:44.596 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.update_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:05:44.598 31152 DEBUG neutron.agent.l3.agent [-] Finished a router update for f3f62c2a-3a5f-4238-aa66-e31e9e25b340 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-06-28 05:05:46.432 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 05:06:00.755 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:06:00.756 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:06:04.320 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:06:04.328 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.008s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:06:06.539 31152 DEBUG neutron.agent.l3.agent [req-af731681-cca7-40d7-a890-b90628bf6d22 82758ee9dbed4bdf919e32bc6135cc36 f7db0ec7eef2499fb14973cea9da1187 - - -] Got routers updated notification :[u'f3f62c2a-3a5f-4238-aa66-e31e9e25b340'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-06-28 05:06:06.546 31152 DEBUG neutron.agent.l3.agent [-] Starting router update for f3f62c2a-3a5f-4238-aa66-e31e9e25b340, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-06-28 05:06:07.007 31152 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks [] for router, before_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 05:06:07.008 31152 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1132
2018-06-28 05:06:07.008 31152 DEBUG neutron.agent.l3.router_info [-] removing internal network: port(7054cd04-456c-4fe7-85d7-e52c531e9ca9) interface(qr-7054cd04-45) internal_network_removed /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:477
2018-06-28 05:06:07.009 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip', '-o', 'link', 'show', 'qr-7054cd04-45'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:06:07.028 31152 DEBUG neutron.agent.linux.utils [-] Running command: ['ip', '-o', 'link', 'show', 'br-int'] create_process /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:92
2018-06-28 05:06:07.052 31152 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): DelPortCommand(if_exists=True, bridge=br-int, port=qr-7054cd04-45) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-06-28 05:06:07.097 31152 DEBUG neutron.agent.l3.router_info [-] removing port {u'allowed_address_pairs': [], u'extra_dhcp_opts': [], u'updated_at': u'2018-06-28T02:56:26Z', u'device_owner': u'network:router_interface', u'revision_number': 4, u'port_security_enabled': False, u'binding:profile': {}, u'binding:vnic_type': u'normal', u'fixed_ips': [{u'subnet_id': u'6e0226bf-9079-43cc-a9c9-12558a221830', u'prefixlen': 24, u'ip_address': u'11.220.1.1'}], u'id': u'7054cd04-456c-4fe7-85d7-e52c531e9ca9', u'security_groups': [], u'binding:vif_details': {}, u'address_scopes': {u'4': None, u'6': None}, u'binding:vif_type': u'unbound', u'mac_address': u'fa:16:3e:15:76:63', u'project_id': u'33b10b76b5ff42d4aea1c3486565316a', u'status': u'DOWN', u'subnets': [{u'dns_nameservers': [u'8.8.4.4'], u'ipv6_ra_mode': None, u'gateway_ip': u'11.220.1.1', u'cidr': u'11.220.1.0/24', u'id': u'6e0226bf-9079-43cc-a9c9-12558a221830', u'subnetpool_id': None}], u'binding:host_id': u'localhost.localdomain', u'description': u'', u'tags': [], u'device_id': u'f3f62c2a-3a5f-4238-aa66-e31e9e25b340', u'name': u'', u'admin_state_up': True, u'network_id': u'f687fcd1-13db-413c-b3aa-03bba91cd90b', u'tenant_id': u'33b10b76b5ff42d4aea1c3486565316a', u'created_at': u'2018-06-28T02:56:24Z', u'mtu': 1450, u'extra_subnets': []} from internal_ports cache _process_internal_ports /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:567
2018-06-28 05:06:07.099 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:06:07.120 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:06:07.122 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.002s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:06:07.123 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:06:07.144 31152 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 05:06:07.145 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:06:07.168 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:06:07.186 31152 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 0 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 05:06:07.187 31152 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 05:06:07.187 31152 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-06-28 05:06:07.188 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:06:07.207 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:06:07.219 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:06:07.234 31152 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 10 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-06-28 05:06:07.235 31152 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-06-28 05:06:07.235 31152 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.linux.pd.update_router-8753339849311', 'neutron.agent.metadata.driver.after_router_updated--9223363283515465747'] for router, after_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 05:06:07.236 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.update_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:06:07.236 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.update_router" :: held 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:06:07.237 31152 DEBUG neutron.agent.l3.agent [-] Finished a router update for f3f62c2a-3a5f-4238-aa66-e31e9e25b340 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-06-28 05:06:16.043 31152 DEBUG neutron.agent.l3.agent [req-4bf9fa66-acb4-49b3-80d9-4ac49fb92703 82758ee9dbed4bdf919e32bc6135cc36 f7db0ec7eef2499fb14973cea9da1187 - - -] Got router deleted notification for f3f62c2a-3a5f-4238-aa66-e31e9e25b340 router_deleted /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:424
2018-06-28 05:06:16.047 31152 DEBUG neutron.agent.l3.agent [-] Starting router update for f3f62c2a-3a5f-4238-aa66-e31e9e25b340, action 1, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-06-28 05:06:16.048 31152 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.metadata.driver.before_router_removed-8753339310069'] for router, before_delete _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 05:06:16.050 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['kill', '-9', '3227'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:06:16.070 31152 DEBUG neutron.agent.l3.router_info [-] process router delete process_delete /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1114
2018-06-28 05:06:16.071 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', '-o', 'netns', 'list'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:06:16.116 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:06:16.137 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:06:16.139 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:06:16.139 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:06:16.157 31152 DEBUG neutron.agent.l3.router_info [-] Terminating radvd daemon in router device: f3f62c2a-3a5f-4238-aa66-e31e9e25b340 disable_radvd /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:520
2018-06-28 05:06:16.159 31152 DEBUG neutron.agent.linux.utils [-] Unable to access /var/lib/neutron/external/pids/f3f62c2a-3a5f-4238-aa66-e31e9e25b340.pid.radvd get_value_from_file /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:254
2018-06-28 05:06:16.160 31152 DEBUG neutron.agent.linux.utils [-] Unable to access /var/lib/neutron/external/pids/f3f62c2a-3a5f-4238-aa66-e31e9e25b340.pid.radvd get_value_from_file /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:254
2018-06-28 05:06:16.161 31152 DEBUG neutron.agent.linux.external_process [-] No process started for f3f62c2a-3a5f-4238-aa66-e31e9e25b340 disable /usr/lib/python2.7/site-packages/neutron/agent/linux/external_process.py:126
2018-06-28 05:06:16.162 31152 DEBUG neutron.agent.linux.ra [-] radvd disabled for router f3f62c2a-3a5f-4238-aa66-e31e9e25b340 disable /usr/lib/python2.7/site-packages/neutron/agent/linux/ra.py:190
2018-06-28 05:06:16.164 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', '-o', 'netns', 'list'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:06:16.179 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:06:16.196 31152 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'delete', 'qrouter-f3f62c2a-3a5f-4238-aa66-e31e9e25b340'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-06-28 05:06:16.212 31152 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.linux.pd.remove_router--9223363283514926535'] for router, after_delete _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-06-28 05:06:16.213 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.remove_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:06:16.214 31152 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.remove_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:06:16.215 31152 DEBUG neutron.agent.l3.agent [-] Finished a router update for f3f62c2a-3a5f-4238-aa66-e31e9e25b340 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:564
2018-06-28 05:06:26.438 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-06-28 05:07:00.758 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:07:00.759 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:07:04.320 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-06-28 05:07:04.325 31152 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.006s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-06-28 05:07:06.442 31152 DEBUG oslo_service.periodic_task [req-d6af6f00-e6c2-409a-a212-2edaf1206c5e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
