2018-09-29 09:54:27.314 27096 DEBUG cinder.scheduler.host_manager [req-4f3a1c44-113a-495f-9467-fd791ff0711c - - - - -] Received volume service update from localhost.localdomain@lvm: {u'filter_function': None, u'goodness_function': None, u'volume_backend_name': u'lvm', u'driver_version': u'3.0.0', u'sparse_copy_volume': True, u'pools': [{u'pool_name': u'lvm', u'filter_function': None, u'goodness_function': None, u'total_volumes': 5, u'multiattach': False, u'provisioned_capacity_gb': 4.0, u'allocated_capacity_gb': 0, u'thin_provisioning_support': True, u'free_capacity_gb': 48.8, u'location_info': u'LVMVolumeDriver:localhost.localdomain:cinder-volumes2:thin:0', u'total_capacity_gb': u'48.93', u'thick_provisioning_support': False, u'reserved_percentage': 0, u'QoS_support': False, u'max_over_subscription_ratio': 1.0}], u'vendor_name': u'Open Source', u'storage_protocol': u'iSCSI'} update_service_capabilities /usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py:406
2018-09-29 09:55:27.313 27096 DEBUG cinder.scheduler.host_manager [req-54d4b91a-a60b-461c-8931-7a3426d068cf - - - - -] Received volume service update from localhost.localdomain@lvm: {u'filter_function': None, u'goodness_function': None, u'volume_backend_name': u'lvm', u'driver_version': u'3.0.0', u'sparse_copy_volume': True, u'pools': [{u'pool_name': u'lvm', u'filter_function': None, u'goodness_function': None, u'total_volumes': 5, u'multiattach': False, u'provisioned_capacity_gb': 4.0, u'allocated_capacity_gb': 0, u'thin_provisioning_support': True, u'free_capacity_gb': 48.8, u'location_info': u'LVMVolumeDriver:localhost.localdomain:cinder-volumes2:thin:0', u'total_capacity_gb': u'48.93', u'thick_provisioning_support': False, u'reserved_percentage': 0, u'QoS_support': False, u'max_over_subscription_ratio': 1.0}], u'vendor_name': u'Open Source', u'storage_protocol': u'iSCSI'} update_service_capabilities /usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py:406
2018-09-29 09:56:27.314 27096 DEBUG cinder.scheduler.host_manager [req-0363ee82-fe76-442d-973f-573f0621e7e3 - - - - -] Received volume service update from localhost.localdomain@lvm: {u'filter_function': None, u'goodness_function': None, u'volume_backend_name': u'lvm', u'driver_version': u'3.0.0', u'sparse_copy_volume': True, u'pools': [{u'pool_name': u'lvm', u'filter_function': None, u'goodness_function': None, u'total_volumes': 5, u'multiattach': False, u'provisioned_capacity_gb': 4.0, u'allocated_capacity_gb': 0, u'thin_provisioning_support': True, u'free_capacity_gb': 48.8, u'location_info': u'LVMVolumeDriver:localhost.localdomain:cinder-volumes2:thin:0', u'total_capacity_gb': u'48.93', u'thick_provisioning_support': False, u'reserved_percentage': 0, u'QoS_support': False, u'max_over_subscription_ratio': 1.0}], u'vendor_name': u'Open Source', u'storage_protocol': u'iSCSI'} update_service_capabilities /usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py:406
2018-09-29 09:57:27.310 27096 DEBUG cinder.scheduler.host_manager [req-7091fc6e-d96b-47d3-9dcc-5d2ef7ae62a2 - - - - -] Received volume service update from localhost.localdomain@lvm: {u'filter_function': None, u'goodness_function': None, u'volume_backend_name': u'lvm', u'driver_version': u'3.0.0', u'sparse_copy_volume': True, u'pools': [{u'pool_name': u'lvm', u'filter_function': None, u'goodness_function': None, u'total_volumes': 5, u'multiattach': False, u'provisioned_capacity_gb': 4.0, u'allocated_capacity_gb': 0, u'thin_provisioning_support': True, u'free_capacity_gb': 48.8, u'location_info': u'LVMVolumeDriver:localhost.localdomain:cinder-volumes2:thin:0', u'total_capacity_gb': u'48.93', u'thick_provisioning_support': False, u'reserved_percentage': 0, u'QoS_support': False, u'max_over_subscription_ratio': 1.0}], u'vendor_name': u'Open Source', u'storage_protocol': u'iSCSI'} update_service_capabilities /usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py:406
2018-09-29 09:58:27.306 27096 DEBUG cinder.scheduler.host_manager [req-9fd8fb70-01a2-4c4f-bb1a-0e27cb7e16a9 - - - - -] Received volume service update from localhost.localdomain@lvm: {u'filter_function': None, u'goodness_function': None, u'volume_backend_name': u'lvm', u'driver_version': u'3.0.0', u'sparse_copy_volume': True, u'pools': [{u'pool_name': u'lvm', u'filter_function': None, u'goodness_function': None, u'total_volumes': 5, u'multiattach': False, u'provisioned_capacity_gb': 4.0, u'allocated_capacity_gb': 0, u'thin_provisioning_support': True, u'free_capacity_gb': 48.8, u'location_info': u'LVMVolumeDriver:localhost.localdomain:cinder-volumes2:thin:0', u'total_capacity_gb': u'48.93', u'thick_provisioning_support': False, u'reserved_percentage': 0, u'QoS_support': False, u'max_over_subscription_ratio': 1.0}], u'vendor_name': u'Open Source', u'storage_protocol': u'iSCSI'} update_service_capabilities /usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py:406
2018-09-29 09:59:00.142 27096 DEBUG cinder.scheduler.manager [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Flow 'volume_create_scheduler' (b3f8949c-a038-41ca-8525-2898b491ca91) transitioned into state 'RUNNING' from state 'PENDING' _flow_receiver /usr/lib/python2.7/site-packages/taskflow/listeners/logging.py:145
2018-09-29 09:59:00.146 27096 DEBUG cinder.scheduler.manager [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Task 'cinder.scheduler.flows.create_volume.ExtractSchedulerSpecTask;volume:create' (ddcbf9c9-8356-4a48-999b-75cd3ebfe0dc) transitioned into state 'RUNNING' from state 'PENDING' _task_receiver /usr/lib/python2.7/site-packages/taskflow/listeners/logging.py:194
2018-09-29 09:59:00.149 27096 DEBUG cinder.scheduler.manager [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Task 'cinder.scheduler.flows.create_volume.ExtractSchedulerSpecTask;volume:create' (ddcbf9c9-8356-4a48-999b-75cd3ebfe0dc) transitioned into state 'SUCCESS' from state 'RUNNING' with result '{'request_spec': RequestSpec(CG_backend=<?>,cgsnapshot_id=None,consistencygroup_id=None,group_backend=<?>,group_id=None,image_id=233e61b8-dde2-4e29-8961-2bd873fc19a6,snapshot_id=None,source_replicaid=None,source_volid=None,volume=Volume(1ca4a1fa-b339-4988-af31-6716a3a107c0),volume_id=1ca4a1fa-b339-4988-af31-6716a3a107c0,volume_properties=VolumeProperties,volume_type=VolumeType(f7f6fe9b-db4d-462d-ba3e-1b81bec5277f))}' _task_receiver /usr/lib/python2.7/site-packages/taskflow/listeners/logging.py:183
2018-09-29 09:59:00.151 27096 DEBUG cinder.scheduler.manager [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Task 'cinder.scheduler.flows.create_volume.ScheduleCreateVolumeTask;volume:create' (1b0a1c9c-654a-4745-98d7-2e62966f82b0) transitioned into state 'RUNNING' from state 'PENDING' _task_receiver /usr/lib/python2.7/site-packages/taskflow/listeners/logging.py:194
2018-09-29 09:59:00.153 27096 DEBUG object [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Cinder object VolumeProperties has no attribute named: volume_id get /usr/lib/python2.7/site-packages/cinder/objects/base.py:224
2018-09-29 09:59:00.161 27096 DEBUG oslo_db.sqlalchemy.engines [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] MySQL server mode set to STRICT_TRANS_TABLES,STRICT_ALL_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,TRADITIONAL,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION _check_effective_sql_mode /usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/engines.py:285
2018-09-29 09:59:00.203 27096 DEBUG cinder.scheduler.base_filter [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Starting with 1 host(s) get_filtered_objects /usr/lib/python2.7/site-packages/cinder/scheduler/base_filter.py:95
2018-09-29 09:59:00.204 27096 DEBUG cinder.scheduler.base_filter [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Filter AvailabilityZoneFilter returned 1 host(s) get_filtered_objects /usr/lib/python2.7/site-packages/cinder/scheduler/base_filter.py:125
2018-09-29 09:59:00.204 27096 DEBUG cinder.scheduler.filters.capacity_filter [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Checking if host localhost.localdomain@lvm#lvm can create a 1 GB volume (1ca4a1fa-b339-4988-af31-6716a3a107c0) backend_passes /usr/lib/python2.7/site-packages/cinder/scheduler/filters/capacity_filter.py:62
2018-09-29 09:59:00.205 27096 DEBUG cinder.scheduler.filters.capacity_filter [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Checking provisioning for request of 1 GB. Backend: host 'localhost.localdomain@lvm#lvm':free_capacity_gb: 48.8, total_capacity_gb: 48.93,allocated_capacity_gb: 0, max_over_subscription_ratio: 1.0,reserved_percentage: 0, provisioned_capacity_gb: 0,thin_provisioning_support: True, thick_provisioning_support: False,pools: None,updated at: 2018-09-29 13:58:27.299651 backend_passes /usr/lib/python2.7/site-packages/cinder/scheduler/filters/capacity_filter.py:134
2018-09-29 09:59:00.206 27096 DEBUG cinder.scheduler.filters.capacity_filter [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Space information for volume creation on host localhost.localdomain@lvm#lvm (requested / avail): 1/48.8 backend_passes /usr/lib/python2.7/site-packages/cinder/scheduler/filters/capacity_filter.py:172
2018-09-29 09:59:00.206 27096 DEBUG cinder.scheduler.base_filter [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Filter CapacityFilter returned 1 host(s) get_filtered_objects /usr/lib/python2.7/site-packages/cinder/scheduler/base_filter.py:125
2018-09-29 09:59:00.207 27096 DEBUG cinder.scheduler.base_filter [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Filter CapabilitiesFilter returned 1 host(s) get_filtered_objects /usr/lib/python2.7/site-packages/cinder/scheduler/base_filter.py:125
2018-09-29 09:59:00.208 27096 DEBUG cinder.scheduler.filter_scheduler [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Filtered [host 'localhost.localdomain@lvm#lvm':free_capacity_gb: 48.8, total_capacity_gb: 48.93,allocated_capacity_gb: 0, max_over_subscription_ratio: 1.0,reserved_percentage: 0, provisioned_capacity_gb: 0,thin_provisioning_support: True, thick_provisioning_support: False,pools: None,updated at: 2018-09-29 13:58:27.299651] _get_weighted_candidates /usr/lib/python2.7/site-packages/cinder/scheduler/filter_scheduler.py:328
2018-09-29 09:59:00.209 27096 DEBUG cinder.scheduler.filter_scheduler [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Choosing localhost.localdomain@lvm#lvm _choose_top_backend /usr/lib/python2.7/site-packages/cinder/scheduler/filter_scheduler.py:543
2018-09-29 09:59:00.210 27096 DEBUG cinder.scheduler.host_manager [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Consumed 1 GB from backend: host 'localhost.localdomain@lvm#lvm':free_capacity_gb: 47.8, total_capacity_gb: 48.93,allocated_capacity_gb: 1, max_over_subscription_ratio: 1.0,reserved_percentage: 0, provisioned_capacity_gb: 1,thin_provisioning_support: True, thick_provisioning_support: False,pools: None,updated at: 2018-09-29 13:59:00.210235 consume_from_volume /usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py:283
2018-09-29 09:59:00.387 27096 DEBUG cinder.scheduler.manager [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Task 'cinder.scheduler.flows.create_volume.ScheduleCreateVolumeTask;volume:create' (1b0a1c9c-654a-4745-98d7-2e62966f82b0) transitioned into state 'SUCCESS' from state 'RUNNING' with result 'None' _task_receiver /usr/lib/python2.7/site-packages/taskflow/listeners/logging.py:183
2018-09-29 09:59:00.391 27096 DEBUG cinder.scheduler.manager [req-c6230b14-98ed-4c91-a7ac-ccfaa85bc656 aedf45cea9e946e893afce284fc081e4 2ebef7cb18914036ba1ad74c53d4a524 - b10e626ce8344ba3924395d3eb8f7974 b10e626ce8344ba3924395d3eb8f7974] Flow 'volume_create_scheduler' (b3f8949c-a038-41ca-8525-2898b491ca91) transitioned into state 'SUCCESS' from state 'RUNNING' _flow_receiver /usr/lib/python2.7/site-packages/taskflow/listeners/logging.py:145
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server [req-44317eff-56ea-4301-8947-b6ff80f8c4eb - - - - -] Exception during message handling: KeyError: 'provisioned_capacity_gb'
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server Traceback (most recent call last):
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py", line 160, in _process_incoming
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 213, in dispatch
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 183, in _do_dispatch
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/manager.py", line 124, in update_service_capabilities
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/driver.py", line 99, in update_service_capabilities
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 402, in update_service_capabilities
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server     if ((not self._get_updated_pools(capab_old, capab_copy)) and ((not capab_old.get('timestamp')) or (not capab_last_update.get('timestamp')) or (capab_last_update['timestamp'] < capab_old['timestamp']))):
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 571, in _get_updated_pools
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server     if (newpools[key][k] != oldpools[key][k]):
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server KeyError: 'provisioned_capacity_gb'
2018-09-29 09:59:27.317 27096 ERROR oslo_messaging.rpc.server 
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server [req-44317eff-56ea-4301-8947-b6ff80f8c4eb - - - - -] Exception during message handling: KeyError: 'provisioned_capacity_gb'
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server Traceback (most recent call last):
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py", line 160, in _process_incoming
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 213, in dispatch
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 183, in _do_dispatch
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/manager.py", line 141, in notify_service_capabilities
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/driver.py", line 107, in notify_service_capabilities
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 419, in notify_service_capabilities
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server     updated = self._get_updated_pools(self.service_states[backend], capabilities)
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 571, in _get_updated_pools
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server     if (newpools[key][k] != oldpools[key][k]):
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server KeyError: 'provisioned_capacity_gb'
2018-09-29 09:59:27.333 27096 ERROR oslo_messaging.rpc.server 
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server [req-f1e9f900-9f1a-4423-ad96-146ba25b0897 - - - - -] Exception during message handling: KeyError: 'provisioned_capacity_gb'
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server Traceback (most recent call last):
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py", line 160, in _process_incoming
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 213, in dispatch
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 183, in _do_dispatch
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/manager.py", line 124, in update_service_capabilities
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/driver.py", line 99, in update_service_capabilities
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 402, in update_service_capabilities
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server     if ((not self._get_updated_pools(capab_old, capab_copy)) and ((not capab_old.get('timestamp')) or (not capab_last_update.get('timestamp')) or (capab_last_update['timestamp'] < capab_old['timestamp']))):
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 571, in _get_updated_pools
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server     if (newpools[key][k] != oldpools[key][k]):
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server KeyError: 'provisioned_capacity_gb'
2018-09-29 10:00:27.311 27096 ERROR oslo_messaging.rpc.server 
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server [req-f1e9f900-9f1a-4423-ad96-146ba25b0897 - - - - -] Exception during message handling: KeyError: 'provisioned_capacity_gb'
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server Traceback (most recent call last):
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py", line 160, in _process_incoming
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 213, in dispatch
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 183, in _do_dispatch
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/manager.py", line 141, in notify_service_capabilities
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/driver.py", line 107, in notify_service_capabilities
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 419, in notify_service_capabilities
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server     updated = self._get_updated_pools(self.service_states[backend], capabilities)
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 571, in _get_updated_pools
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server     if (newpools[key][k] != oldpools[key][k]):
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server KeyError: 'provisioned_capacity_gb'
2018-09-29 10:00:27.322 27096 ERROR oslo_messaging.rpc.server 
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server [req-c9834aea-ee9b-4c06-8ede-903169967e46 - - - - -] Exception during message handling: KeyError: 'provisioned_capacity_gb'
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server Traceback (most recent call last):
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py", line 160, in _process_incoming
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 213, in dispatch
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 183, in _do_dispatch
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/manager.py", line 124, in update_service_capabilities
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/driver.py", line 99, in update_service_capabilities
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 402, in update_service_capabilities
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server     if ((not self._get_updated_pools(capab_old, capab_copy)) and ((not capab_old.get('timestamp')) or (not capab_last_update.get('timestamp')) or (capab_last_update['timestamp'] < capab_old['timestamp']))):
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 571, in _get_updated_pools
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server     if (newpools[key][k] != oldpools[key][k]):
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server KeyError: 'provisioned_capacity_gb'
2018-09-29 10:01:27.310 27096 ERROR oslo_messaging.rpc.server 
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server [req-c9834aea-ee9b-4c06-8ede-903169967e46 - - - - -] Exception during message handling: KeyError: 'provisioned_capacity_gb'
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server Traceback (most recent call last):
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py", line 160, in _process_incoming
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 213, in dispatch
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 183, in _do_dispatch
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/manager.py", line 141, in notify_service_capabilities
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/driver.py", line 107, in notify_service_capabilities
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 419, in notify_service_capabilities
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server     updated = self._get_updated_pools(self.service_states[backend], capabilities)
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 571, in _get_updated_pools
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server     if (newpools[key][k] != oldpools[key][k]):
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server KeyError: 'provisioned_capacity_gb'
2018-09-29 10:01:27.322 27096 ERROR oslo_messaging.rpc.server 
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server [req-a0d462a6-2b03-48d9-adcc-a48b6b24786b e386cb43209f41fcb7173020f656e97e 63d6ee59c98741e4acf874cc7755dc45 - default default] Exception during message handling: KeyError: 'provisioned_capacity_gb'
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server Traceback (most recent call last):
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py", line 160, in _process_incoming
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 213, in dispatch
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 183, in _do_dispatch
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/manager.py", line 124, in update_service_capabilities
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/driver.py", line 99, in update_service_capabilities
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 402, in update_service_capabilities
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server     if ((not self._get_updated_pools(capab_old, capab_copy)) and ((not capab_old.get('timestamp')) or (not capab_last_update.get('timestamp')) or (capab_last_update['timestamp'] < capab_old['timestamp']))):
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 571, in _get_updated_pools
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server     if (newpools[key][k] != oldpools[key][k]):
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server KeyError: 'provisioned_capacity_gb'
2018-09-29 10:02:21.836 27096 ERROR oslo_messaging.rpc.server 
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server [req-a0d462a6-2b03-48d9-adcc-a48b6b24786b e386cb43209f41fcb7173020f656e97e 63d6ee59c98741e4acf874cc7755dc45 - default default] Exception during message handling: KeyError: 'provisioned_capacity_gb'
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server Traceback (most recent call last):
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py", line 160, in _process_incoming
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 213, in dispatch
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 183, in _do_dispatch
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/manager.py", line 141, in notify_service_capabilities
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/driver.py", line 107, in notify_service_capabilities
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 419, in notify_service_capabilities
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server     updated = self._get_updated_pools(self.service_states[backend], capabilities)
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 571, in _get_updated_pools
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server     if (newpools[key][k] != oldpools[key][k]):
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server KeyError: 'provisioned_capacity_gb'
2018-09-29 10:02:21.916 27096 ERROR oslo_messaging.rpc.server 
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server [req-26bb9246-60eb-4024-aeeb-ce17d2b533c6 - - - - -] Exception during message handling: KeyError: 'provisioned_capacity_gb'
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server Traceback (most recent call last):
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py", line 160, in _process_incoming
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 213, in dispatch
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 183, in _do_dispatch
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/manager.py", line 124, in update_service_capabilities
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/driver.py", line 99, in update_service_capabilities
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 402, in update_service_capabilities
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server     if ((not self._get_updated_pools(capab_old, capab_copy)) and ((not capab_old.get('timestamp')) or (not capab_last_update.get('timestamp')) or (capab_last_update['timestamp'] < capab_old['timestamp']))):
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 571, in _get_updated_pools
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server     if (newpools[key][k] != oldpools[key][k]):
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server KeyError: 'provisioned_capacity_gb'
2018-09-29 10:03:27.308 27096 ERROR oslo_messaging.rpc.server 
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server [req-26bb9246-60eb-4024-aeeb-ce17d2b533c6 - - - - -] Exception during message handling: KeyError: 'provisioned_capacity_gb'
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server Traceback (most recent call last):
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py", line 160, in _process_incoming
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 213, in dispatch
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py", line 183, in _do_dispatch
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/manager.py", line 141, in notify_service_capabilities
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/driver.py", line 107, in notify_service_capabilities
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server     timestamp)
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 419, in notify_service_capabilities
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server     updated = self._get_updated_pools(self.service_states[backend], capabilities)
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server   File "/usr/lib/python2.7/site-packages/cinder/scheduler/host_manager.py", line 571, in _get_updated_pools
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server     if (newpools[key][k] != oldpools[key][k]):
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server KeyError: 'provisioned_capacity_gb'
2018-09-29 10:03:27.321 27096 ERROR oslo_messaging.rpc.server 
