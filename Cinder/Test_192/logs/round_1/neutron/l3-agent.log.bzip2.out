2018-09-28 18:51:45.191 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:51:45.192 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:52:07.047 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 18:52:23.602 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:52:23.607 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.005s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:52:45.192 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:52:45.193 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:52:47.049 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 18:53:23.602 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:53:23.604 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.002s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:53:27.054 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 18:53:45.194 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:53:45.195 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:54:07.057 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 18:54:23.602 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:54:23.605 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.003s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:54:42.373 27915 DEBUG neutron.agent.l3.agent [req-3e438814-ae90-4ca5-8cd2-a87af77371f9 a026844fe34242a1ac4117d1e3e15839 5345d816c7e741648f8df975195aa34f - - -] Got routers updated notification :[u'3a45a29b-78d5-47e0-8bb0-cc14d3d9483d'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-09-28 18:54:42.376 27915 DEBUG neutron.agent.l3.agent [-] Starting router update for 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-09-28 18:54:45.195 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:54:45.196 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:54:47.059 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 18:54:47.650 27915 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.linux.pd.add_router-8766360935383'] for router, before_create _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-09-28 18:54:47.651 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.add_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:54:47.652 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.add_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:54:47.652 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', '-o', 'netns', 'list'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:47.668 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'add', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:47.686 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'sysctl', '-w', 'net.ipv4.conf.all.promote_secondaries=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:47.702 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', 'link', 'set', 'lo', 'up'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:47.718 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'sysctl', '-w', 'net.ipv4.ip_forward=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:47.734 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'sysctl', '-w', 'net.ipv4.conf.all.arp_ignore=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:47.752 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'sysctl', '-w', 'net.ipv4.conf.all.arp_announce=2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:47.769 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'sysctl', '-w', 'net.ipv6.conf.all.forwarding=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:47.784 27915 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1141
2018-09-28 18:54:47.785 27915 DEBUG neutron.agent.l3.router_info [-] adding internal network: prefix(qr-), port(e8e3d67f-8899-4835-9220-e38b76b10c96) _internal_network_added /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:444
2018-09-28 18:54:47.786 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-o', 'link', 'show', 'qr-e8e3d67f-88'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:47.809 27915 DEBUG neutron.agent.linux.utils [-] Running command: ['ip', '-o', 'link', 'show', 'br-int'] create_process /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:92
2018-09-28 18:54:47.831 27915 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): DelPortCommand(if_exists=True, bridge=None, port=qr-e8e3d67f-88) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-09-28 18:54:47.832 27915 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Transaction caused no change do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:114
2018-09-28 18:54:47.834 27915 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): AddPortCommand(bridge=br-int, may_exist=False, port=qr-e8e3d67f-88) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-09-28 18:54:47.835 27915 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=1): DbSetCommand(table=Port, col_values=(('tag', 4095),), record=qr-e8e3d67f-88) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-09-28 18:54:47.839 27915 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=2): DbSetCommand(table=Interface, col_values=(('type', 'internal'), ('external_ids', {'iface-id': u'e8e3d67f-8899-4835-9220-e38b76b10c96', 'iface-status': 'active', 'attached-mac': u'fa:16:3e:1f:f0:87'})), record=qr-e8e3d67f-88) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-09-28 18:54:47.864 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'link', 'set', 'qr-e8e3d67f-88', 'address', 'fa:16:3e:1f:f0:87'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:47.874 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', '-o', 'netns', 'list'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:47.887 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'link', 'set', 'qr-e8e3d67f-88', 'netns', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:47.910 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', 'link', 'set', 'qr-e8e3d67f-88', 'mtu', '1450'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:47.925 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', 'link', 'set', 'qr-e8e3d67f-88', 'up'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:47.952 27915 DEBUG neutron.agent.linux.interface [-] init_router_port: device_name(qr-e8e3d67f-88), namespace(qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d) init_router_port /usr/lib/python2.7/site-packages/neutron/agent/linux/interface.py:180
2018-09-28 18:54:47.953 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-o', 'link', 'show', 'qr-e8e3d67f-88'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:47.967 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', 'addr', 'show', 'qr-e8e3d67f-88'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:47.986 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-4', 'addr', 'add', '11.233.1.1/24', 'scope', 'global', 'dev', 'qr-e8e3d67f-88', 'brd', '11.233.1.255'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.006 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-4', 'route', 'list', 'dev', 'qr-e8e3d67f-88', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.020 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-6', 'route', 'list', 'dev', 'qr-e8e3d67f-88', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.035 27915 DEBUG neutron.agent.l3.router_info [-] appending port {u'allowed_address_pairs': [], u'extra_dhcp_opts': [], u'updated_at': u'2018-09-28T22:54:41Z', u'device_owner': u'network:router_interface', u'revision_number': 4, u'port_security_enabled': False, u'binding:profile': {}, u'binding:vnic_type': u'normal', u'fixed_ips': [{u'subnet_id': u'b8708110-c13a-4b8b-a85a-42bb4aece2f4', u'prefixlen': 24, u'ip_address': u'11.233.1.1'}], u'id': u'e8e3d67f-8899-4835-9220-e38b76b10c96', u'security_groups': [], u'binding:vif_details': {}, u'address_scopes': {u'4': None, u'6': None}, u'binding:vif_type': u'unbound', u'mac_address': u'fa:16:3e:1f:f0:87', u'project_id': u'5345d816c7e741648f8df975195aa34f', u'status': u'DOWN', u'subnets': [{u'dns_nameservers': [u'8.8.4.4'], u'ipv6_ra_mode': None, u'gateway_ip': u'11.233.1.1', u'cidr': u'11.233.1.0/24', u'id': u'b8708110-c13a-4b8b-a85a-42bb4aece2f4', u'subnetpool_id': None}], u'binding:host_id': u'localhost.localdomain', u'description': u'', u'tags': [], u'device_id': u'3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', u'name': u'', u'admin_state_up': True, u'network_id': u'bff340b0-22b6-4af9-a775-f7de8a81a69b', u'tenant_id': u'5345d816c7e741648f8df975195aa34f', u'created_at': u'2018-09-28T22:54:38Z', u'mtu': 1450, u'extra_subnets': []} to internal_ports cache _process_internal_ports /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:555
2018-09-28 18:54:48.036 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.043 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-U', '-I', 'qr-e8e3d67f-88', '-c', '1', '-w', '1.5', '11.233.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.062 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:54:48.063 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:54:48.063 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.072 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-A', '-I', 'qr-e8e3d67f-88', '-c', '1', '-w', '1.5', '11.233.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.080 27915 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-09-28 18:54:48.081 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.107 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.125 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.158 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip6tables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.181 27915 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 106 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-09-28 18:54:48.182 27915 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-09-28 18:54:48.183 27915 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-09-28 18:54:48.184 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.207 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.225 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.242 27915 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 10 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-09-28 18:54:48.243 27915 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-09-28 18:54:48.243 27915 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.metadata.driver.after_router_added--9223363270494378605'] for router, after_create _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-09-28 18:54:48.244 27915 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-09-28 18:54:48.245 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.267 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.284 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.301 27915 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 17 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-09-28 18:54:48.302 27915 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-09-28 18:54:48.303 27915 DEBUG neutron.agent.linux.utils [-] Unable to access /var/lib/neutron/external/pids/3a45a29b-78d5-47e0-8bb0-cc14d3d9483d.pid get_value_from_file /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:254
2018-09-28 18:54:48.303 27915 DEBUG neutron.agent.linux.utils [-] Unable to access /var/lib/neutron/external/pids/3a45a29b-78d5-47e0-8bb0-cc14d3d9483d.pid get_value_from_file /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:254
2018-09-28 18:54:48.305 27915 DEBUG neutron.agent.metadata.driver [-] haproxy_cfg = 
global
    log         /dev/log local0 debug
    log-tag     haproxy-metadata-proxy-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d
    user        neutron
    group       neutron
    maxconn     1024
    pidfile     /var/lib/neutron/external/pids/3a45a29b-78d5-47e0-8bb0-cc14d3d9483d.pid
    daemon

defaults
    log global
    mode http
    option httplog
    option dontlognull
    option http-server-close
    option forwardfor
    retries                 3
    timeout http-request    30s
    timeout connect         30s
    timeout client          32s
    timeout server          32s
    timeout http-keep-alive 30s

listen listener
    bind 0.0.0.0:9697
    server metadata /var/lib/neutron/metadata_proxy
    http-request add-header X-Neutron-Router-ID 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d
 create_config_file /usr/lib/python2.7/site-packages/neutron/agent/metadata/driver.py:135
2018-09-28 18:54:48.306 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'haproxy', '-f', '/var/lib/neutron/ns-metadata-proxy/3a45a29b-78d5-47e0-8bb0-cc14d3d9483d.conf'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:48.341 27915 DEBUG neutron.agent.l3.agent [-] Finished a router update for 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-09-28 18:54:50.108 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-U', '-I', 'qr-e8e3d67f-88', '-c', '1', '-w', '1.5', '11.233.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:50.139 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-A', '-I', 'qr-e8e3d67f-88', '-c', '1', '-w', '1.5', '11.233.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:52.167 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-U', '-I', 'qr-e8e3d67f-88', '-c', '1', '-w', '1.5', '11.233.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:52.204 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-A', '-I', 'qr-e8e3d67f-88', '-c', '1', '-w', '1.5', '11.233.1.1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:54:56.930 27915 DEBUG neutron.agent.l3.agent [req-b4358aef-9081-4f5b-8441-00c902dd9882 a026844fe34242a1ac4117d1e3e15839 5345d816c7e741648f8df975195aa34f - - -] Got routers updated notification :[u'3a45a29b-78d5-47e0-8bb0-cc14d3d9483d'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-09-28 18:54:56.934 27915 DEBUG neutron.agent.l3.agent [-] Starting router update for 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-09-28 18:55:01.412 27915 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks [] for router, before_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-09-28 18:55:01.413 27915 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1141
2018-09-28 18:55:01.414 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.434 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:55:01.435 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:55:01.435 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.get_preserve_ips" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:55:01.436 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.get_preserve_ips" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:55:01.436 27915 DEBUG neutron.agent.l3.router_info [-] External gateway added: port({u'allowed_address_pairs': [], u'extra_dhcp_opts': [], u'updated_at': u'2018-09-28T22:54:55Z', u'device_owner': u'network:router_gateway', u'revision_number': 3, u'port_security_enabled': False, u'binding:profile': {}, u'binding:vnic_type': u'normal', u'fixed_ips': [{u'subnet_id': u'e5bb7a33-b226-47eb-85d8-c14051948f2e', u'prefixlen': 24, u'ip_address': u'172.24.4.9'}], u'id': u'bec1f6a0-8a0d-4ee9-b541-13eb040134bb', u'security_groups': [], u'binding:vif_details': {}, u'address_scopes': {u'4': None, u'6': None}, u'binding:vif_type': u'unbound', u'mac_address': u'fa:16:3e:cf:63:b0', u'project_id': u'', u'status': u'DOWN', u'subnets': [{u'dns_nameservers': [], u'ipv6_ra_mode': None, u'gateway_ip': u'172.24.4.1', u'cidr': u'172.24.4.0/24', u'id': u'e5bb7a33-b226-47eb-85d8-c14051948f2e', u'subnetpool_id': None}], u'binding:host_id': u'localhost.localdomain', u'description': u'', u'tags': [], u'device_id': u'3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', u'name': u'', u'admin_state_up': True, u'network_id': u'533a418a-d3aa-482e-b45a-0fa3403a5591', u'tenant_id': u'', u'created_at': u'2018-09-28T22:54:54Z', u'mtu': 1500, u'extra_subnets': []}), interface(qg-bec1f6a0-8a), ns(qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d) _external_gateway_added /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:701
2018-09-28 18:55:01.437 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-o', 'link', 'show', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.468 27915 DEBUG neutron.agent.linux.utils [-] Running command: ['ip', '-o', 'link', 'show', 'br-int'] create_process /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:92
2018-09-28 18:55:01.492 27915 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): DelPortCommand(if_exists=True, bridge=None, port=qg-bec1f6a0-8a) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-09-28 18:55:01.494 27915 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Transaction caused no change do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:114
2018-09-28 18:55:01.495 27915 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): AddPortCommand(bridge=br-int, may_exist=False, port=qg-bec1f6a0-8a) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-09-28 18:55:01.497 27915 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=1): DbSetCommand(table=Port, col_values=(('tag', 4095),), record=qg-bec1f6a0-8a) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-09-28 18:55:01.497 27915 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=2): DbSetCommand(table=Interface, col_values=(('type', 'internal'), ('external_ids', {'iface-id': u'bec1f6a0-8a0d-4ee9-b541-13eb040134bb', 'iface-status': 'active', 'attached-mac': u'fa:16:3e:cf:63:b0'})), record=qg-bec1f6a0-8a) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-09-28 18:55:01.542 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'link', 'set', 'qg-bec1f6a0-8a', 'address', 'fa:16:3e:cf:63:b0'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.559 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', '-o', 'netns', 'list'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.573 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'link', 'set', 'qg-bec1f6a0-8a', 'netns', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.606 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', 'link', 'set', 'qg-bec1f6a0-8a', 'mtu', '1500'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.620 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', 'link', 'set', 'qg-bec1f6a0-8a', 'up'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.646 27915 DEBUG neutron.agent.linux.interface [-] init_router_port: device_name(qg-bec1f6a0-8a), namespace(qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d) init_router_port /usr/lib/python2.7/site-packages/neutron/agent/linux/interface.py:180
2018-09-28 18:55:01.647 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-o', 'link', 'show', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.681 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', 'addr', 'show', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.718 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-4', 'addr', 'add', '172.24.4.9/24', 'scope', 'global', 'dev', 'qg-bec1f6a0-8a', 'brd', '172.24.4.255'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.744 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-4', 'route', 'list', 'dev', 'qg-bec1f6a0-8a', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.763 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-6', 'route', 'list', 'dev', 'qg-bec1f6a0-8a', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.783 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-4', 'route', 'list', 'dev', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.810 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-6', 'route', 'list', 'dev', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.828 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-4', 'route', 'replace', 'default', 'via', '172.24.4.1', 'dev', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.848 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'sysctl', '-w', 'net.ipv6.conf.qg-bec1f6a0-8a.accept_ra=2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.884 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'sysctl', '-w', 'net.ipv6.conf.qg-bec1f6a0-8a.forwarding=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.930 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.add_gw_interface" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:55:01.931 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.add_gw_interface" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:55:01.932 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.937 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-U', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.9'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:01.977 27915 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-09-28 18:55:01.979 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:02.084 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:02.100 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-A', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.9'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:02.121 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:02.154 27915 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 14 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-09-28 18:55:02.154 27915 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-09-28 18:55:02.155 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', 'addr', 'show', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:02.174 27915 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-09-28 18:55:02.177 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:02.207 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:02.233 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:02.272 27915 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 5 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-09-28 18:55:02.273 27915 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-09-28 18:55:02.274 27915 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.metadata.driver.after_router_updated-8766360397964', 'neutron.agent.linux.pd.update_router-8766360935398'] for router, after_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-09-28 18:55:02.274 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.update_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:55:02.275 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.update_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:55:02.275 27915 DEBUG neutron.agent.l3.agent [-] Finished a router update for 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-09-28 18:55:04.138 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-U', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.9'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:04.208 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-A', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.9'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:06.282 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-U', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.9'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:06.313 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-A', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.9'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:55:23.602 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:55:23.610 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.008s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:55:27.061 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 18:55:45.196 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:55:45.197 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:56:07.056 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 18:56:21.967 27915 DEBUG neutron.agent.l3.agent [req-9ff0951d-052c-4123-9323-87cef5a8cb3a a026844fe34242a1ac4117d1e3e15839 5345d816c7e741648f8df975195aa34f - - -] Got routers updated notification :[u'3a45a29b-78d5-47e0-8bb0-cc14d3d9483d'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-09-28 18:56:21.972 27915 DEBUG neutron.agent.l3.agent [-] Starting router update for 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-09-28 18:56:23.603 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:56:23.606 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.003s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:56:28.568 27915 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks [] for router, before_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-09-28 18:56:28.569 27915 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1141
2018-09-28 18:56:28.569 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:28.599 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:56:28.599 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:56:28.600 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.get_preserve_ips" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:56:28.601 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.get_preserve_ips" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:56:28.601 27915 DEBUG neutron.agent.l3.router_info [-] External gateway added: port({u'allowed_address_pairs': [], u'extra_dhcp_opts': [], u'updated_at': u'2018-09-28T22:55:03Z', u'device_owner': u'network:router_gateway', u'revision_number': 6, u'port_security_enabled': False, u'binding:profile': {}, u'binding:vnic_type': u'normal', u'fixed_ips': [{u'subnet_id': u'e5bb7a33-b226-47eb-85d8-c14051948f2e', u'prefixlen': 24, u'ip_address': u'172.24.4.9'}], u'id': u'bec1f6a0-8a0d-4ee9-b541-13eb040134bb', u'security_groups': [], u'binding:vif_details': {u'port_filter': True, u'datapath_type': u'system', u'ovs_hybrid_plug': True}, u'address_scopes': {u'4': None, u'6': None}, u'binding:vif_type': u'ovs', u'mac_address': u'fa:16:3e:cf:63:b0', u'project_id': u'', u'status': u'ACTIVE', u'subnets': [{u'dns_nameservers': [], u'ipv6_ra_mode': None, u'gateway_ip': u'172.24.4.1', u'cidr': u'172.24.4.0/24', u'id': u'e5bb7a33-b226-47eb-85d8-c14051948f2e', u'subnetpool_id': None}], u'binding:host_id': u'localhost.localdomain', u'description': u'', u'tags': [], u'device_id': u'3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', u'name': u'', u'admin_state_up': True, u'network_id': u'533a418a-d3aa-482e-b45a-0fa3403a5591', u'tenant_id': u'', u'created_at': u'2018-09-28T22:54:54Z', u'mtu': 1500, u'extra_subnets': []}), interface(qg-bec1f6a0-8a), ns(qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d) _external_gateway_added /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:701
2018-09-28 18:56:28.602 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-o', 'link', 'show', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:28.617 27915 INFO neutron.agent.linux.interface [-] Device qg-bec1f6a0-8a already exists
2018-09-28 18:56:28.618 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', 'link', 'set', 'qg-bec1f6a0-8a', 'mtu', '1500'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:28.636 27915 DEBUG neutron.agent.linux.interface [-] init_router_port: device_name(qg-bec1f6a0-8a), namespace(qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d) init_router_port /usr/lib/python2.7/site-packages/neutron/agent/linux/interface.py:180
2018-09-28 18:56:28.637 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-o', 'link', 'show', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:28.657 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', 'addr', 'show', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:28.680 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-4', 'route', 'list', 'dev', 'qg-bec1f6a0-8a', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:28.706 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-6', 'route', 'list', 'dev', 'qg-bec1f6a0-8a', 'scope', 'link'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:28.737 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-4', 'route', 'list', 'dev', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:28.819 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-6', 'route', 'list', 'dev', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:28.855 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-4', 'route', 'replace', 'default', 'via', '172.24.4.1', 'dev', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:28.885 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'sysctl', '-w', 'net.ipv6.conf.qg-bec1f6a0-8a.accept_ra=2'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:28.946 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'sysctl', '-w', 'net.ipv6.conf.qg-bec1f6a0-8a.forwarding=1'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:28.974 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:28.975 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-U', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.9'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:29.053 27915 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-09-28 18:56:29.055 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:29.079 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-A', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.9'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:29.113 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:29.157 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:29.198 27915 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 7 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-09-28 18:56:29.199 27915 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-09-28 18:56:29.200 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', 'addr', 'show', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:29.253 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-4', 'addr', 'add', '172.24.4.5/32', 'scope', 'global', 'dev', 'qg-bec1f6a0-8a', 'brd', '172.24.4.5'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:29.305 27915 DEBUG neutron.agent.l3.router_info [-] Floating ip ba0befbe-6980-43ff-8dfe-dee5a0842067 added, status ACTIVE process_floating_ip_addresses /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:361
2018-09-28 18:56:29.307 27915 DEBUG neutron.agent.l3.router_info [-] Sending floating ip statuses: {u'ba0befbe-6980-43ff-8dfe-dee5a0842067': 'ACTIVE'} update_fip_statuses /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:951
2018-09-28 18:56:29.365 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-U', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.5'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:29.410 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-A', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.5'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:29.640 27915 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-09-28 18:56:29.641 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:29.707 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:29.733 27915 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 0 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-09-28 18:56:29.736 27915 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-09-28 18:56:29.738 27915 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.metadata.driver.after_router_updated-8766360397964', 'neutron.agent.linux.pd.update_router-8766360935398'] for router, after_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-09-28 18:56:29.739 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.update_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:56:29.741 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.update_router" :: held 0.002s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:56:29.742 27915 DEBUG neutron.agent.l3.agent [-] Finished a router update for 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-09-28 18:56:31.148 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-U', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.9'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:31.177 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-A', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.9'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:31.512 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-U', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.5'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:31.541 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-A', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.5'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:33.218 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-U', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.9'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:33.245 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-A', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.9'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:33.565 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-U', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.5'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:33.616 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'arping', '-A', '-I', 'qg-bec1f6a0-8a', '-c', '1', '-w', '1.5', '172.24.4.5'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 18:56:45.196 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:56:45.197 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:56:47.058 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 18:57:23.603 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:57:23.607 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.004s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:57:27.062 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 18:57:45.196 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:57:45.197 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:58:07.065 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 18:58:23.606 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:58:23.614 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.008s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:58:45.197 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:58:45.198 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:58:47.068 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 18:59:23.609 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.003s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:59:23.614 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.005s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 18:59:27.070 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 18:59:45.198 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 18:59:45.199 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:00:07.072 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 19:00:23.606 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:00:23.654 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.048s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:00:45.199 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:00:45.208 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.008s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:00:47.074 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 19:00:49.009 27915 DEBUG neutron.agent.l3.agent [req-4282140d-3a45-4a41-a9c9-eb9f81e8e80a a026844fe34242a1ac4117d1e3e15839 5345d816c7e741648f8df975195aa34f - - -] Got routers updated notification :[u'3a45a29b-78d5-47e0-8bb0-cc14d3d9483d'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-09-28 19:00:49.014 27915 DEBUG neutron.agent.l3.agent [-] Starting router update for 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-09-28 19:00:50.695 27915 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks [] for router, before_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-09-28 19:00:50.696 27915 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1141
2018-09-28 19:00:50.697 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:00:50.805 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:00:50.806 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:00:50.807 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:00:50.819 27915 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-09-28 19:00:50.819 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:00:50.886 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:00:50.906 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:00:50.927 27915 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 7 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-09-28 19:00:50.928 27915 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-09-28 19:00:50.928 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', 'addr', 'show', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:00:50.952 27915 DEBUG neutron.agent.l3.router_info [-] Removing floating ip 172.24.4.5/32 from interface qg-bec1f6a0-8a in namespace qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d process_floating_ip_addresses /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:384
2018-09-28 19:00:50.953 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-4', 'addr', 'del', '172.24.4.5/32', 'dev', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:00:50.973 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'conntrack', '-D', '-d', '172.24.4.5'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:00:51.040 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'conntrack', '-D', '-q', '172.24.4.5'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:00:51.060 27915 DEBUG neutron.agent.l3.router_info [-] Sending floating ip statuses: {u'ba0befbe-6980-43ff-8dfe-dee5a0842067': 'DOWN'} update_fip_statuses /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:951
2018-09-28 19:00:51.166 27915 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-09-28 19:00:51.167 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:00:51.196 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:00:51.219 27915 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 0 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-09-28 19:00:51.220 27915 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-09-28 19:00:51.221 27915 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.metadata.driver.after_router_updated-8766360397964', 'neutron.agent.linux.pd.update_router-8766360935398'] for router, after_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-09-28 19:00:51.222 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.update_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:00:51.222 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.update_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:00:51.223 27915 DEBUG neutron.agent.l3.agent [-] Finished a router update for 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-09-28 19:01:23.607 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:01:23.636 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.029s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:01:27.076 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 19:01:45.200 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:01:45.201 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:02:07.078 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 19:02:12.388 27915 DEBUG neutron.agent.l3.agent [req-f5f9e6ac-d0a8-40a1-a8b4-21ab3c8d2c75 19fd61da60674b2e91a07d2494333a2a 2727c1c6bd314bc0863d48295fa76702 - - -] Got routers updated notification :[u'3a45a29b-78d5-47e0-8bb0-cc14d3d9483d'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-09-28 19:02:12.390 27915 DEBUG neutron.agent.l3.agent [-] Starting router update for 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-09-28 19:02:13.286 27915 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks [] for router, before_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-09-28 19:02:13.286 27915 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1141
2018-09-28 19:02:13.287 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:13.323 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:02:13.325 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.002s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:02:13.326 27915 DEBUG neutron.agent.l3.router_info [-] External gateway removed: port({u'allowed_address_pairs': [], u'extra_dhcp_opts': [], u'updated_at': u'2018-09-28T22:55:03Z', u'device_owner': u'network:router_gateway', u'revision_number': 6, u'port_security_enabled': False, u'binding:profile': {}, u'binding:vnic_type': u'normal', u'fixed_ips': [{u'subnet_id': u'e5bb7a33-b226-47eb-85d8-c14051948f2e', u'prefixlen': 24, u'ip_address': u'172.24.4.9'}], u'id': u'bec1f6a0-8a0d-4ee9-b541-13eb040134bb', u'security_groups': [], u'binding:vif_details': {u'port_filter': True, u'datapath_type': u'system', u'ovs_hybrid_plug': True}, u'address_scopes': {u'4': None, u'6': None}, u'binding:vif_type': u'ovs', u'mac_address': u'fa:16:3e:cf:63:b0', u'project_id': u'', u'status': u'ACTIVE', u'subnets': [{u'dns_nameservers': [], u'ipv6_ra_mode': None, u'gateway_ip': u'172.24.4.1', u'cidr': u'172.24.4.0/24', u'id': u'e5bb7a33-b226-47eb-85d8-c14051948f2e', u'subnetpool_id': None}], u'binding:host_id': u'localhost.localdomain', u'description': u'', u'tags': [], u'device_id': u'3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', u'name': u'', u'admin_state_up': True, u'network_id': u'533a418a-d3aa-482e-b45a-0fa3403a5591', u'tenant_id': u'', u'created_at': u'2018-09-28T22:54:54Z', u'mtu': 1500, u'extra_subnets': []}), interface(qg-bec1f6a0-8a) external_gateway_removed /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:762
2018-09-28 19:02:13.327 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-4', 'addr', 'del', '172.24.4.9/24', 'dev', 'qg-bec1f6a0-8a'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:13.345 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'conntrack', '-D', '-d', '172.24.4.9'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:13.362 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'conntrack', '-D', '-q', '172.24.4.9'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:13.377 27915 DEBUG neutron.agent.linux.utils [-] Running command: ['ip', '-o', 'link', 'show', 'br-int'] create_process /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:92
2018-09-28 19:02:13.398 27915 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): DelPortCommand(if_exists=True, bridge=br-int, port=qg-bec1f6a0-8a) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-09-28 19:02:13.439 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.remove_gw_interface" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:02:13.440 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.remove_gw_interface" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:02:13.440 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:13.456 27915 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-09-28 19:02:13.457 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:13.508 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:13.520 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:13.538 27915 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 13 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-09-28 19:02:13.539 27915 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-09-28 19:02:13.541 27915 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-09-28 19:02:13.543 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:13.566 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:13.586 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:13.606 27915 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 5 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-09-28 19:02:13.607 27915 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-09-28 19:02:13.607 27915 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.metadata.driver.after_router_updated-8766360397964', 'neutron.agent.linux.pd.update_router-8766360935398'] for router, after_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-09-28 19:02:13.609 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.update_router" :: waited 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:02:13.609 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.update_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:02:13.610 27915 DEBUG neutron.agent.l3.agent [-] Finished a router update for 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-09-28 19:02:23.607 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:02:23.611 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.004s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:02:29.839 27915 DEBUG neutron.agent.l3.agent [req-ed5341dd-399b-4982-b231-5f723c85cc28 19fd61da60674b2e91a07d2494333a2a 2727c1c6bd314bc0863d48295fa76702 - - -] Got routers updated notification :[u'3a45a29b-78d5-47e0-8bb0-cc14d3d9483d'] routers_updated /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:432
2018-09-28 19:02:29.841 27915 DEBUG neutron.agent.l3.agent [-] Starting router update for 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d, action None, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-09-28 19:02:30.127 27915 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks [] for router, before_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-09-28 19:02:30.128 27915 DEBUG neutron.agent.l3.router_info [-] process router updates process /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1141
2018-09-28 19:02:30.128 27915 DEBUG neutron.agent.l3.router_info [-] removing internal network: port(e8e3d67f-8899-4835-9220-e38b76b10c96) interface(qr-e8e3d67f-88) internal_network_removed /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:477
2018-09-28 19:02:30.129 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip', '-o', 'link', 'show', 'qr-e8e3d67f-88'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:30.144 27915 DEBUG neutron.agent.linux.utils [-] Running command: ['ip', '-o', 'link', 'show', 'br-int'] create_process /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:92
2018-09-28 19:02:30.168 27915 DEBUG ovsdbapp.backend.ovs_idl.transaction [-] Running txn command(idx=0): DelPortCommand(if_exists=True, bridge=br-int, port=qr-e8e3d67f-88) do_commit /usr/lib/python2.7/site-packages/ovsdbapp/backend/ovs_idl/transaction.py:84
2018-09-28 19:02:30.197 27915 DEBUG neutron.agent.l3.router_info [-] removing port {u'allowed_address_pairs': [], u'extra_dhcp_opts': [], u'updated_at': u'2018-09-28T22:54:41Z', u'device_owner': u'network:router_interface', u'revision_number': 4, u'port_security_enabled': False, u'binding:profile': {}, u'binding:vnic_type': u'normal', u'fixed_ips': [{u'subnet_id': u'b8708110-c13a-4b8b-a85a-42bb4aece2f4', u'prefixlen': 24, u'ip_address': u'11.233.1.1'}], u'id': u'e8e3d67f-8899-4835-9220-e38b76b10c96', u'security_groups': [], u'binding:vif_details': {}, u'address_scopes': {u'4': None, u'6': None}, u'binding:vif_type': u'unbound', u'mac_address': u'fa:16:3e:1f:f0:87', u'project_id': u'5345d816c7e741648f8df975195aa34f', u'status': u'DOWN', u'subnets': [{u'dns_nameservers': [u'8.8.4.4'], u'ipv6_ra_mode': None, u'gateway_ip': u'11.233.1.1', u'cidr': u'11.233.1.0/24', u'id': u'b8708110-c13a-4b8b-a85a-42bb4aece2f4', u'subnetpool_id': None}], u'binding:host_id': u'localhost.localdomain', u'description': u'', u'tags': [], u'device_id': u'3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', u'name': u'', u'admin_state_up': True, u'network_id': u'bff340b0-22b6-4af9-a775-f7de8a81a69b', u'tenant_id': u'5345d816c7e741648f8df975195aa34f', u'created_at': u'2018-09-28T22:54:38Z', u'mtu': 1450, u'extra_subnets': []} from internal_ports cache _process_internal_ports /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:567
2018-09-28 19:02:30.199 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:30.213 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:02:30.214 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:02:30.214 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:30.229 27915 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-09-28 19:02:30.231 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:30.249 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:30.264 27915 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 0 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-09-28 19:02:30.264 27915 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-09-28 19:02:30.265 27915 DEBUG oslo_concurrency.lockutils [-] Acquired semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:212
2018-09-28 19:02:30.266 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:30.287 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'iptables-restore', '-n'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:30.300 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'ip6tables-save'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:30.315 27915 DEBUG neutron.agent.linux.iptables_manager [-] IPTablesManager.apply completed with success. 10 iptables commands were issued _apply_synchronized /usr/lib/python2.7/site-packages/neutron/agent/linux/iptables_manager.py:601
2018-09-28 19:02:30.319 27915 DEBUG oslo_concurrency.lockutils [-] Releasing semaphore "iptables-qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:225
2018-09-28 19:02:30.319 27915 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.metadata.driver.after_router_updated-8766360397964', 'neutron.agent.linux.pd.update_router-8766360935398'] for router, after_update _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-09-28 19:02:30.320 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.update_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:02:30.321 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.update_router" :: held 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:02:30.321 27915 DEBUG neutron.agent.l3.agent [-] Finished a router update for 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:583
2018-09-28 19:02:38.522 27915 DEBUG neutron.agent.l3.agent [req-5ab1250c-d6ca-4ff2-8f9d-a702587bc24d 19fd61da60674b2e91a07d2494333a2a 2727c1c6bd314bc0863d48295fa76702 - - -] Got router deleted notification for 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d router_deleted /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:424
2018-09-28 19:02:38.525 27915 DEBUG neutron.agent.l3.agent [-] Starting router update for 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d, action 1, priority 0 _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:534
2018-09-28 19:02:38.525 27915 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.metadata.driver.before_router_removed--9223363270494377837'] for router, before_delete _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-09-28 19:02:38.527 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['kill', '-9', '617'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:38.553 27915 DEBUG neutron.agent.l3.router_info [-] process router delete process_delete /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:1123
2018-09-28 19:02:38.555 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', '-o', 'netns', 'list'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:38.580 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:38.596 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.sync_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:02:38.597 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.sync_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:02:38.598 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:38.613 27915 DEBUG neutron.agent.l3.router_info [-] Terminating radvd daemon in router device: 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d disable_radvd /usr/lib/python2.7/site-packages/neutron/agent/l3/router_info.py:520
2018-09-28 19:02:38.614 27915 DEBUG neutron.agent.linux.utils [-] Unable to access /var/lib/neutron/external/pids/3a45a29b-78d5-47e0-8bb0-cc14d3d9483d.pid.radvd get_value_from_file /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:254
2018-09-28 19:02:38.614 27915 DEBUG neutron.agent.linux.utils [-] Unable to access /var/lib/neutron/external/pids/3a45a29b-78d5-47e0-8bb0-cc14d3d9483d.pid.radvd get_value_from_file /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:254
2018-09-28 19:02:38.615 27915 DEBUG neutron.agent.linux.external_process [-] No process started for 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d disable /usr/lib/python2.7/site-packages/neutron/agent/linux/external_process.py:126
2018-09-28 19:02:38.626 27915 DEBUG neutron.agent.linux.ra [-] radvd disabled for router 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d disable /usr/lib/python2.7/site-packages/neutron/agent/linux/ra.py:190
2018-09-28 19:02:38.627 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', '-o', 'netns', 'list'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:38.638 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'exec', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d', 'find', '/sys/class/net', '-maxdepth', '1', '-type', 'l', '-printf', '%f '] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:38.651 27915 DEBUG neutron.agent.linux.utils [-] Running command (rootwrap daemon): ['ip', 'netns', 'delete', 'qrouter-3a45a29b-78d5-47e0-8bb0-cc14d3d9483d'] execute_rootwrap_daemon /usr/lib/python2.7/site-packages/neutron/agent/linux/utils.py:108
2018-09-28 19:02:38.661 27915 DEBUG neutron_lib.callbacks.manager [-] Notify callbacks ['neutron.agent.linux.pd.remove_router--9223363270493840448'] for router, after_delete _notify_loop /usr/lib/python2.7/site-packages/neutron_lib/callbacks/manager.py:167
2018-09-28 19:02:38.662 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" acquired by "neutron.agent.linux.pd.remove_router" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:02:38.663 27915 DEBUG oslo_concurrency.lockutils [-] Lock "l3-agent-pd" released by "neutron.agent.linux.pd.remove_router" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:02:38.663 27915 DEBUG neutron.agent.l3.agent [-] Finished a router update for 3a45a29b-78d5-47e0-8bb0-cc14d3d9483d _process_router_update /usr/lib/python2.7/site-packages/neutron/agent/l3/agent.py:564
2018-09-28 19:02:45.200 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:02:45.201 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:02:47.080 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 19:03:23.608 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:03:23.610 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.003s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
2018-09-28 19:03:27.085 27915 DEBUG oslo_service.periodic_task [req-b6f7ef4d-e229-4e1d-992a-ddf3858f142e - - - - -] Running periodic task L3NATAgentWithStateReport.periodic_sync_routers_task run_periodic_tasks /usr/lib/python2.7/site-packages/oslo_service/periodic_task.py:215
2018-09-28 19:03:45.200 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" acquired by "neutron.agent.linux.external_process._check_child_processes" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:270
2018-09-28 19:03:45.201 27915 DEBUG oslo_concurrency.lockutils [-] Lock "_check_child_processes" released by "neutron.agent.linux.external_process._check_child_processes" :: held 0.001s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:282
